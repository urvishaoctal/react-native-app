(self.modernJsonp=self.modernJsonp||[]).push([["92503"],{69119:function(e,t,i){i.d(t,{Z:()=>o});var n=i(619013),a=i(13882);function o(e){(0,a.Z)(1,arguments);var t=(0,n.Z)(e);return t.setHours(0,0,0,0),t}},537347:function(e){!function(){function t(e,t){document.addEventListener?e.addEventListener("scroll",t,!1):e.attachEvent("scroll",t)}function i(e){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(e)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function n(e,t){e.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+t+";"}function a(e){var t=e.a.offsetWidth,i=t+100;return e.f.style.width=i+"px",e.c.scrollLeft=i,e.b.scrollLeft=e.b.scrollWidth+100,e.g!==t&&(e.g=t,!0)}function o(e,i){function n(){a(o)&&o.a.parentNode&&i(o.g)}var o=e;t(e.b,n),t(e.c,n),a(e)}function l(e,t){var i=t||{};this.family=e,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var r=null,s=null,d=null,c=null;function u(){return null===c&&(c=!!document.fonts),c}function p(e,t){return[e.style,e.weight,!function(){if(null===d){var e=document.createElement("div");try{e.style.font="condensed 100px sans-serif"}catch(e){}d=""!==e.style.font}return d}()?"":e.stretch,"100px",t].join(" ")}l.prototype.load=function(e,t){var a=this,l=e||"BESbswy",d=0,c=t||3e3,h=(new Date).getTime();return new Promise(function(e,t){if(u()&&!function(){if(null===s)if(u()&&/Apple/.test(window.navigator.vendor)){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);s=!!e&&603>parseInt(e[1],10)}else s=!1;return s}()){var m,g=new Promise(function(e,t){!function i(){(new Date).getTime()-h>=c?t(Error(""+c+"ms timeout exceeded")):document.fonts.load(p(a,'"'+a.family+'"'),l).then(function(t){1<=t.length?e():setTimeout(i,25)},t)}()});Promise.race([new Promise(function(e,t){d=setTimeout(function(){t(Error(""+c+"ms timeout exceeded"))},c)}),g]).then(function(){clearTimeout(d),e(a)},t)}else m=function(){function s(){var t;(t=-1!=y&&-1!=_||-1!=y&&-1!=f||-1!=_&&-1!=f)&&((t=y!=_&&y!=f&&_!=f)||(null===r&&(r=!!(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent))&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))),t=r&&(y==x&&_==x&&f==x||y==v&&_==v&&f==v||y==b&&_==b&&f==b)),t=!t),t&&(w.parentNode&&w.parentNode.removeChild(w),clearTimeout(d),e(a))}var u=new i(l),m=new i(l),g=new i(l),y=-1,_=-1,f=-1,x=-1,v=-1,b=-1,w=document.createElement("div");w.dir="ltr",n(u,p(a,"sans-serif")),n(m,p(a,"serif")),n(g,p(a,"monospace")),w.appendChild(u.a),w.appendChild(m.a),w.appendChild(g.a),document.body.appendChild(w),x=u.a.offsetWidth,v=m.a.offsetWidth,b=g.a.offsetWidth,function e(){if((new Date).getTime()-h>=c)w.parentNode&&w.parentNode.removeChild(w),t(Error(""+c+"ms timeout exceeded"));else{var i=document.hidden;(!0===i||void 0===i)&&(y=u.a.offsetWidth,_=m.a.offsetWidth,f=g.a.offsetWidth,s()),d=setTimeout(e,50)}}(),o(u,function(e){y=e,s()}),n(u,p(a,'"'+a.family+'",sans-serif')),o(m,function(e){_=e,s()}),n(m,p(a,'"'+a.family+'",serif')),o(g,function(e){f=e,s()}),n(g,p(a,'"'+a.family+'",monospace'))},document.body?m():document.addEventListener?document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),m()}):document.attachEvent("onreadystatechange",function e(){("interactive"==document.readyState||"complete"==document.readyState)&&(document.detachEvent("onreadystatechange",e),m())})})},e.exports=l}()},505370:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselVideoItem_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};n.hash="510195e37611b9b69a16eccfeb13e9cf";let a=n},621539:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCarousel_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselVideoItem_pin"}],type:"Pin",abstractKey:null};n.hash="83e61e6fc89222c2a0b03276839f44a5";let a=n},3449:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupVideoWithVisibility_pin",selections:[{args:null,kind:"FragmentSpread",name:"CloseupVideoNonDuplo_pin"}],type:"Pin",abstractKey:null};n.hash="60493becbbe037be854a8cd1136fede6";let a=n},128948:function(e,t,i){var n;i.r(t),i.d(t,{default:()=>o});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButtonWrapper_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"advertiserId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"attributionSourceId",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"campaignId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDownstreamPromotion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinPromotionId",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"promoter",plural:!1,selections:[n],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isPrimaryWebsiteVerified",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"websiteUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isDirectToSiteAllowed",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isInstagramApi",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:null,kind:"FragmentSpread",name:"DomainLinkButton_pin"}],type:"Pin",abstractKey:null};a.hash="4c99d4ae49479ef8ed3083d59d4343c1";let o=a},362250:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DomainLinkButton_pin",selections:[{args:null,kind:"FragmentSpread",name:"ContextMenuClickthroughLogging_pin"}],type:"Pin",abstractKey:null};n.hash="08b89bb2190b936e38e11d4ce341058f";let a=n},971203:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoContent_pin",selections:[{args:null,kind:"FragmentSpread",name:"useCalculateMaxWidthAndHeightForSideBySideVariant_pin"},{args:null,kind:"FragmentSpread",name:"CloseupVideoWithVisibility_pin"}],type:"Pin",abstractKey:null};n.hash="89029511c11617e1150976d1002228db";let a=n},655327:function(e,t,i){i.r(t),i.d(t,{default:()=>a});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useBuildCloseupImageOverlayProps_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"access",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null}],type:"Pin",abstractKey:null};n.hash="759d6577be9e10b82394f48ee87daf24";let a=n},224266:function(e,t,i){var n;i.r(t),i.d(t,{default:()=>o});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMediaContainer_pin",selections:[{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"altText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"autoAltText",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:n=[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"Shuffle",kind:"LinkedField",name:"shuffle",plural:!1,selections:n,storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"method",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"utmLink",storageKey:null}],type:"Pin",abstractKey:null};a.hash="c3027cfec56abe15f0990c2bc6707062";let o=a},501392:function(e,t,i){i.d(t,{Z:()=>r});var n=i(281098),a=i(274320),o=i(15667),l=i(647709);function r({dangerouslySkipActivation:e}){(0,n.Z)("useCloseupCSSCarouselExp","/app/common/react/components/closeup/CloseupBody/CloseupCarousel/useCloseupCSSCarouselExp.tsx");let{isAuthenticated:t,userAgent:{browserName:i,browserVersion:r}}=(0,o.B)(),s=(0,l.HG)(),{checkExperiment:d}=(0,a.r)();return{isEnabled:"Chrome"===i&&Number(r.split(".")[0])>=135&&t&&s&&d("closeup_google_css_carousel_dweb",{dangerouslySkipActivation:e}).anyEnabled}}},364674:function(e,t,i){i.d(t,{Z:()=>s});var n=i(281098),a=i(20256),o=i(525839),l=i(618336),r=i(785893);function s({digitalMediaType:e,isMobile:t=!1,isViewedByOwnerEmployeeOrAgency:i=!1}){(0,n.Z)("AICloseupLabel","/app/common/react/components/closeup/CloseupBody/CloseupImage/AICloseupLabel.tsx");let s=(0,o.ZP)(),d={[l.s.TRAINED_ALGORITHMIC_MEDIA]:s._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images'),[l.s.COMPOSITE_WITH_TRAINED_ALGORITHMIC_MEDIA]:s._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images'),[l.s.DETECTED_TRAINED_ALGORITHMIC_MEDIA]:s._('AI modified', 'closeup.aIModifiedLabel.label', 'Label for AI Modified images')},c=()=>(0,r.jsx)(a.xu,{alignItems:"center",color:"transparentDarkGray","data-test-id":"ai-generated-label",display:"flex",height:t?48:44,justifyContent:"center",paddingX:4,rounding:4,children:(0,r.jsx)(a.xv,{color:"light",size:"300",children:d[e]})});return i?(0,r.jsx)(a.u,{idealDirection:"up",text:s._('This label won\u2019t appear on Pins in a promoted state. Your paid ads will include the disclosure on the "Why am I seeing this ad" page.', 'AICloseupLabel.tooltip.text', 'Tooltip text for AICloseupLabel'),children:c()}):c()}},630119:function(e,t,i){i.d(t,{Z:()=>S});var n,a,o=i(281098),l=i(667294);i(167912);var r=i(20256),s=i(617778),d=i(415546),c=i(525839),u=i(453179),p=i(774429),h=i(603316),m=i(785893);let g=(void 0!==n||(n=i(362250)).hash&&"08b89bb2190b936e38e11d4ce341058f"!==n.hash&&console.error("The definition of 'DomainLinkButton_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function y({clientTrackingParams:e,domain:t,link:i,pinKey:n,trafficSource:a,size:y="lg",onMiddleBtnClick:_,viewType:f=3,hovered:x}){let v;(0,o.Z)("DomainLinkButton","/app/common/react/components/closeup/CloseupBody/CloseupImage/DomainLinkButton.tsx");let b=(0,c.ZP)(),w=(0,d.Z)(g,n),P=(0,p.Z)({clickthroughType:"middleClick",location:"closeup.domainLinkButton"}),I=(0,l.useCallback)(()=>{(0,h.nP)(`web.closeup.media_viewer_stats.clickthrough.clicked_from.${675===f?"media_viewer":"closeup"}`)},[f]);return i.startsWith("https://i.pinimg.com")?(0,m.jsx)(l.Fragment,{}):(v=(0,u.vj)(i)?b._('See recipe', 'closeup.defaultMetadata.visitButton', 'Button to visit recipe link on Pin'):t?b._('Visit site', 'closeup.pinActionDropDown.visitSite', 'Button allowing user to clickthrough Pin'):b._('Learn more', 'closeup.image.domainLinkButton', 'Text indicating where clickthrough will navigate to'),(0,m.jsx)(s.Z,{clientTrackingParams:e,hovered:x,pinKey:w,trafficSource:a,viewType:f,children:(0,m.jsx)(r.zx,{_onAuxClick:({event:e})=>{(0,u.UE)(e)&&(P(),e.preventDefault(),e.stopPropagation(),I(),_(e))},accessibilityLabel:v,color:"semiTransparentWhite",dataTestId:"visit-button",iconStart:"arrow-up-right",onClick:I,size:y,tabIndex:-1,text:v})}))}let _=({onClick:e,href:t,children:i,onNavigation:n,toggleHover:a})=>((0,o.Z)("NavigationWrapper","/app/common/react/components/closeup/CloseupBody/CloseupImage/NavigationWrapper.tsx"),(0,m.jsx)(r.xu,{"data-test-id":"image-link",children:(0,m.jsx)(r.Tg,{href:t,onMouseEnter:a,onMouseLeave:a,onTap:({event:t,dangerouslyDisableOnNavigation:i})=>{i(),e(),n({event:t})},rel:"nofollow",children:i})}));var f=i(980787),x=i(355940),v=i(611282),b=i(899678),w=i(274320),P=i(821806),I=i(601686);let C=(void 0!==a||(a=i(128948)).hash&&"4c99d4ae49479ef8ed3083d59d4343c1"!==a.hash&&console.error("The definition of 'DomainLinkButtonWrapper_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function S({auxData:e,domain:t,link:i,onClick:n,pinKey:a,trafficSource:r,viewType:s}){(0,o.Z)("DomainLinkButtonWrapper","/app/common/react/components/closeup/CloseupBody/CloseupImage/DomainLinkButtonWrapper.tsx");let c=(0,d.Z)(C,a),{logContextEvent:u}=(0,f.u)(),{checkExperiment:p}=(0,w.r)(),h=c.isInstagramApi&&c.nativeCreator?.websiteUrl&&c.nativeCreator?.isPrimaryWebsiteVerified&&c.nativeCreator?.isDirectToSiteAllowed,g=h&&p("dweb_closeup_links").anyEnabled?c.nativeCreator?.websiteUrl:i,{clientTrackingParams:S}=(0,I.x4)(),k=(0,v.Z)({href:{pathname:g,state:{trackingParams:S}},target:"blank",clientTrackingParams:S,externalData:{auxData:e,pin:c&&{attributionSourceId:c.attributionSourceId,board:c.board&&{url:c.board.url},campaignId:c.campaignId,entityId:c.entityId,isDownstreamPromotion:c.isDownstreamPromotion,isPromoted:c.isPromoted,pinner:c.pinner&&{username:c.pinner.username},pinPromotionId:c.pinPromotionId,promoter:c.promoter&&{entityId:c.promoter.entityId},storyPinDataId:c.storyPinDataId,trackingParams:c.trackingParams,advertiserId:c.advertiserId}}}),[j,Z]=(0,l.useState)(!1),T=(0,l.useCallback)(()=>Z(e=>!e),[]);return(0,m.jsx)(x.Z,{name:"SafeSuspense_DomainLinkButtonWrapper_DomainLinkButton",children:(0,m.jsx)(P.Z,{children:(0,m.jsx)(b.Z,{children:(0,m.jsx)(_,{href:g,onClick:()=>{n(),u({event_type:102,element:162,component:4,aux_data:{is_claimed_domain:h}})},onNavigation:k,toggleHover:T,children:(0,m.jsx)(y,{clientTrackingParams:S,domain:t,hovered:j,link:g,onMiddleBtnClick:e=>{n(),u({event_type:102,element:162,component:4,aux_data:{is_claimed_domain:h}}),k({event:e})},pinKey:c,trafficSource:r,viewType:s})})})})})}},935410:function(e,t,i){i.r(t),i.d(t,{default:()=>S});var n=i(281098),a=i(667294),o=i(633301),l=i(303151),r=i(20256),s=i(369416),d=i(785893);let c="animated-text";function u({duration:e,show:t,text:i}){(0,n.Z)("CloseupButtonText","/app/common/react/components/closeup/CloseupBody/CloseupImage/ImageOverlay/CloseupButtonText.tsx");let l=(0,a.useRef)(null),u=`
    .${c}-enter {
      opacity: 0;
    }
    .${c}-enter-active {
      opacity: 1;
      transition: opacity ${e}ms cubic-bezier(1,0,1,0);
    }
    .${c}-enter-done {
      opacity: 1;
    }
    .${c}-exit {
      opacity: 1;
    }
    .${c}-exit-active {
      opacity: 0;
      transition: opacity ${e}ms cubic-bezier(0,1,0,1);
    }
    .${c}-exit-done {
      opacity: 0;
    }
  `;return(0,d.jsxs)(a.Fragment,{children:[(0,d.jsx)(s.Z,{unsafeCSS:u}),(0,d.jsx)(o.Z,{appear:!0,classNames:c,in:t,nodeRef:l,timeout:e,children:(0,d.jsx)(r.xu,{ref:l,opacity:0,children:(0,d.jsx)(r.mg,{size:"md",children:i})})})]})}var p=i(874072),h=i(111330),m=i(121836),g=i(521009),y=i(667835),_=i(702849),f=i(274320),x=i(15667),v=i(753143),b=i(238589),w=i(647709),P=i(341742);let I="animated-button-container",C=`
  .${I}-enter  {
    width: 0px;
  }
  .${I}-enter-active {
    width: 100% !important;
    transition: width 200ms ease-in;
  }
  .${I}-enter-done {
    width: 100% !important;
  }
  .${I}-exit {
    width: 100% !important;
  }
  .${I}-exit-active {
    width: 0px !important;
    transition: width 200ms ease-in;
  }
  .${I}-exit-done {
    width: 0px;
  }
`;function S({animateOnMount:e,animationDelayOnMount:t=1e3,leaveOnDurationOnMount:i=3e3,dataTestId:c,icon:S,imageSignature:k,onTap:j,variant:Z}){(0,n.Z)("AnimatedCloseupButton","/app/common/react/components/closeup/CloseupBody/CloseupImage/ImageOverlay/AnimatedCloseupButton.tsx");let T=(0,g.Z)(),{isRTL:E}=(0,x.B)(),A=(0,y.vs)(),D=(0,w.HG)(),z=(0,v.M0)(),B=(0,b.Nl)(),{checkExperiment:L}=(0,f.r)(),M=(0,a.useRef)(null),[F,R]=(0,a.useState)(!1),[V,W]=(0,a.useState)(!1),O=(0,p.Z)({variant:Z}),K=(0,a.useMemo)(()=>A&&D?"rgba(17, 17, 17, 0.9)":F?_.Xq:_.XF,[A,D,F]),H="visual-search"===Z,N=B.getItem(m.Ml)||0,{animationSeenCount:$,lastAnimationTimestamp:G}=z.getItem(h.Yn)||{animationSeenCount:0,lastAnimationTimestamp:0},U=(0,l.Z)(new Date(G),new Date);return(0,P.Z)(()=>{if(H&&!U&&z.setItem(h.Yn,{animationSeenCount:0,lastAnimationTimestamp:G}),!e||H&&![0,1].includes(N)&&L("sg_dweb_improved_share_animation_on_closeup").anyEnabled)return;let n=setTimeout(()=>{W(!0),H&&z.setItem(h.Yn,{animationSeenCount:$+1,lastAnimationTimestamp:Date.now()});let e=setTimeout(()=>{W(!1)},i);return()=>clearTimeout(e)},t);return()=>clearTimeout(n)}),(0,P.Z)(()=>{T({event_type:120,component:128,element:"view-larger"===Z?15864:234,view_type:3,aux_data:{image_signature:k}})}),(0,d.jsxs)(r.iP,{accessibilityLabel:O,onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onTap:j,rounding:"circle",children:[(0,d.jsx)(s.Z,{unsafeCSS:C}),(0,d.jsx)(r.kC,{alignItems:"stretch",justifyContent:"end",children:(0,d.jsx)(o.Z,{appear:!0,classNames:I,in:F||V,nodeRef:M,timeout:200,children:(0,d.jsxs)(r.xu,{ref:M,alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:K}},"data-test-id":c,display:"flex",justifyContent:"end",minHeight:48,minWidth:48,position:"relative",rounding:4,width:0,children:[(0,d.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},marginEnd:2,marginStart:3,overflow:"hidden",children:(0,d.jsx)(u,{duration:200,show:F||V,text:O})}),(0,d.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{paddingLeft:E?"12px":0,paddingRight:E?0:"12px"}},children:(0,d.jsx)(r.JO,{accessibilityLabel:O,color:"default",icon:S,size:24})})]})})})]})}},874072:function(e,t,i){i.d(t,{Z:()=>a});var n=i(525839);function a({variant:e}){let t=(0,n.ZP)();return"view-larger"===e?t._('View larger', 'closeup.image.mediaViewerButton', 'clicking on this button will open a full screen view of the Pin image'):t._('Explore', 'closeup.explore.icon', 'clicking on this text will open a visual search feed')}},516202:function(e,t,i){i.d(t,{Z:()=>s,p:()=>r}),i(167912);var n,a=i(501392),o=i(415546);let l=(void 0!==n||(n=i(655327)).hash&&"759d6577be9e10b82394f48ee87daf24"!==n.hash&&console.error("The definition of 'useBuildCloseupImageOverlayProps_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function r(e,t,i,n,a){return!t&&!!e&&e.includes("tag")&&!i&&!a||n||!1}function s({carouselInfo:e,disablePinTagButton:t,domain:i,hasMetTrustAndSafetyCheck:n,isCollageEnabled:s,isEmployee:d,isORBACProfileManager:c,isScenePin:u,navLink:p,pinKey:h,showProductDetailPage:m}){let g=(0,o.Z)(l,h),{isEnabled:y}=(0,a.Z)({dangerouslySkipActivation:!1}),{access:_,storyPinDataId:f,isPromoted:x}=g,v=!1,b=!1;u||(v=!(b=!!p&&!s)&&!!i&&!!g.link&&!g.link.startsWith("https://i.pinimg.com")&&!(m&&e)&&!s);let w=n&&!c&&!x;return{showCarouselControls:!!e&&!y,showCloseupShopDomainLinkButton:u,showDebugSignalsFeedbackButton:!!d,showDomainLink:v,showDomainLinkButton:b=b&&!g?.isGoLinkless,showFlashlightButton:w,showPinTagButton:r(_,f,t,c,s)}}},96413:function(e,t,i){i.d(t,{Z:()=>u});var n=i(281098),a=i(667294),o=i(20256),l=i(980787),r=i(982166),s=i(525839),d=i(369416),c=i(785893);function u({handlePause:e,handlePlay:t,musicAttributions:i,shouldMute:u,showEndCard:p}){(0,n.Z)("MusicAttribution","/app/common/react/components/closeup/CloseupBody/VisualContent/MusicAttribution.tsx");let h=(0,s.ZP)(),{logContextEvent:m}=(0,l.u)(),[g,y]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{!p&&(i?.length||u)&&m({event_type:u?14600:14601,view_type:3,view_parameter:140})},[m,i,u,p]),p||!i?.length&&!u)return null;let _=()=>{t&&t(),y(!1)},f="";if(i?.length===1){let{artist:e="",title:t=""}=i[0];f=e&&t?`${e} - ${t}`:""}let x=(i?.length||0)>=2?(0,c.jsx)(o.xu,{children:(0,c.jsx)(o.iP,{fullHeight:!0,fullWidth:!0,onTap:()=>{e&&e(),y(!0)},children:(0,c.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(o.xu,{marginEnd:2,children:(0,c.jsx)(o.JO,{accessibilityLabel:h._('Music icon', 'web.closeup.musicicon', 'Artist and song title for Pin music attribution'),color:"inverse",icon:u?"music-off":"music-on",inline:!0,size:12})}),(0,c.jsx)(o.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:h._('View the playlist', 'web.closeup.musicAttibutionModal.entryPoint', 'Entry point for playlist modal')})]})})}):(0,c.jsxs)(a.Fragment,{children:[(0,c.jsx)(o.JO,{accessibilityLabel:h._('Music icon', 'web.pin.closeup.musicicon', 'Music icon for Pin music attribution'),color:"inverse",icon:u?"music-off":"music-on",inline:!0,size:12}),(0,c.jsx)(o.xu,{marginStart:2,overflow:"hidden",children:(0,c.jsxs)("span",{className:f.length>=50?"marquee":void 0,style:{display:"inline-block",maxWidth:f.length>=50?"260px":void 0},children:[(0,c.jsx)(o.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:f}),(0,c.jsx)(d.Z,{unsafeCSS:`
                  .marquee {
                   animation: marquee 10s linear infinite;
                   animation-delay: 2s;
                  }

                  .marquee:hover {
                      animation-play-state: paused;
                  }


                 @keyframes marquee {
                   0% {
                     transform: translateX(0%);
                    }
                  50% {
                    transform: translateX(-100%);
                  }
                  100% {
                    transform: translateX(0%);
                  }
              }
            `})]})})]});return(0,c.jsxs)(a.Fragment,{children:[u?(0,c.jsx)(a.Fragment,{children:(0,c.jsxs)(o.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,c.jsx)(o.xu,{marginEnd:2,children:(0,c.jsx)(o.JO,{accessibilityLabel:h._('Music icon', 'web.closeup.musicMutedIcon', 'Music muted icon for Pin music attribution'),color:"inverse",icon:"music-off",inline:!0,size:12})}),(0,c.jsx)(o.xv,{color:"inverse",inline:!0,overflow:"noWrap",size:"100",children:h._('Audio not available in your location', 'web.closeup.musicAttribution', 'Informational message to tell user audio is not available in their location')})]})}):x,g&&(0,c.jsx)(r.ZP,{accessibilityModalLabel:h._('Artist and song title for this Pin', 'web.closeup.musicAttibutionModal', 'Artist and song title for Pin music attribution'),heading:(0,c.jsxs)(o.kC,{justifyContent:"between",children:[(0,c.jsx)(o.X6,{size:"600",children:h._('Playlist for this video', 'web.closeup.musicAttibutionModal.heading', 'Title for music attribution modal')}),(0,c.jsx)(o.hU,{accessibilityLabel:h._('Close modal button', 'web.closeup.musicAttibutionModal.closeButton', 'Close modal button for music attribution modal'),bgColor:"white",icon:"cancel",iconColor:"darkGray",onClick:_,size:"sm"})]}),onDismiss:_,children:(0,c.jsx)(o.xu,{marginBottom:5,paddingX:5,paddingY:1,children:i?.map(({isrc:e,thumbnail_image_url:t,title:i,artist:n},a)=>(0,c.jsxs)(o.xu,{display:"flex",padding:1,children:[t&&(0,c.jsx)(o.xu,{color:"darkWash",height:60,rounding:7,width:60,children:(0,c.jsx)(o.Ee,{alt:h._('Image of album art', 'web.closeup.musicAttibutionModal.albumArt', 'Alt text for image of album art for associated song'),color:"darkWash",naturalHeight:1,naturalWidth:1,src:t})}),(0,c.jsxs)(o.xu,{direction:"column",display:"flex",justifyContent:"center",paddingX:2,children:[(0,c.jsx)(o.xv,{weight:"bold",children:i??""}),(0,c.jsx)(o.xv,{size:"100",children:n??""})]})]},e||`${a}`))})})]})}},442082:function(e,t,i){i.d(t,{Z:()=>tt});var n,a,o,l=i(281098),r=i(20256),s=i(785893);let d=({children:e})=>((0,l.Z)("ImagePadding","/app/common/react/components/closeup/CloseupBody/VisualContent/ImagePadding.tsx"),(0,s.jsx)(r.xu,{display:"flex",height:"100%",justifyContent:"center",padding:5,width:"100%",children:e}));var c=i(918920),u=i(525839),p=i(15667),h=i(85574),m=i(611499),g=i(601686);let y=({embedUrl:e,isWideVideo:t,paddingBottom:i="50%",shouldPadImage:n})=>{(0,l.Z)("EmbeddedVideoContent","/app/common/react/components/closeup/CloseupBody/VisualContent/EmbeddedVideoContent/EmbeddedVideoContent.tsx");let a=(0,u.ZP)(),o=(0,p.B)(),y=t?m.KP:m.Gg,{showCloseupContentRight:_,closeupWithinMasonryEnabled:f,peekCloseupEnabled:x,viewportSize:v}=(0,g.x4)(),b=e?.replace("http://","https://");b&&b.startsWith("https://www.youtube.com/embed/")&&(b=b.replace("https://www.youtube.com/embed/","https://www.youtube-nocookie.com/embed/"));let w=(0,s.jsx)("div",{style:{height:0,overflow:"hidden",position:"relative",width:"100%",paddingBottom:i,...(0,h.Z)({isSideBySide:!t,isPadded:n,isRTL:o.isRTL,closeupWithinMasonryEnabled:f,peekCloseupEnabled:x})?.borderStyle},children:(0,s.jsx)("iframe",{allowFullScreen:!0,id:c.ZP.VIDEO_IFRAME_ID,src:b,style:{border:0,height:"100%",left:0,position:"absolute",top:0,width:"100%"},title:a._('Embedded content', 'Accessible content for the embedded content iframe', 'Accessible content for the embedded content iframe')})}),P=_&&"lg"===v?(0,s.jsx)(r.xu,{marginBottom:6,marginEnd:t||n?0:6,width:y,children:w}):w;return n?(0,s.jsx)(d,{children:P}):P};var _=i(667294);i(167912);var f=i(501392),x=i(112931),v=i(934645),b=i(527895),w=i(878709);i(422578);var P=i(869985),I=i(521009),C=i(415546);let S=(void 0!==n||(n=i(505370)).hash&&"510195e37611b9b69a16eccfeb13e9cf"!==n.hash&&console.error("The definition of 'CarouselVideoItem_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),k=({contextLogData:e,height:t,isFocused:i,videoList:n,onFocus:a,onUnfocus:o,pinId:d,pinKey:c,width:u})=>{(0,l.Z)("CarouselVideoItem","/app/common/react/components/common/Carousel/CarouselItem/CarouselVideoItem.tsx");let p=(0,I.Z)(),h=(0,C.Z)(S,c),{V_720P:m,V_HLSV4:g,V_HLSV3_MOBILE:y}=n,{height:f=1,width:x=1,thumbnail:v}=m||g||y||{},b=f/x,w=b;"number"==typeof t&&"number"==typeof u&&(w=t/u),(0,_.useEffect)(()=>{i?a&&a():o&&o()},[i,a,o]),(0,_.useEffect)(()=>{i&&p({component:e.component,event_type:13,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[i,e,p]);let k=(0,_.useCallback)(()=>{p({component:e.component,event_type:3621,object_id_str:e.objectId,view_parameter:e.viewParameter,view_type:e.view})},[e,p]);return(0,s.jsx)(r.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:(0,s.jsx)(r.xu,{width:`${100*Math.min(w/b,1)}%`,children:(0,s.jsx)(P.Z,{contextLogData:e,customThumbnail:v,disabled:!i,loop:!0,muted:!1,onPlay:k,pinId:d,pinKey:h,preferMp4:!0,showControls:"hover",variant:"default",video:{mp4:m,hls:g,hlsv3:y}})})})};var j=i(980787),Z=i(273094),T=i(482694),E=i(67831),A=i(956077),D=i(431338),z=i(104659),B=i(300685),L=i(974297),M=i(712172);let F=({fit:e,highResOnly:t,onError:i,onLoad:n,slot:a,slotIndex:o})=>{(0,l.Z)("CarouselImageItem","/app/www/common/Carousel/CarouselItem/CarouselImageItem.tsx");let d=(0,u.ZP)(),{details:c=""}=a,{url:p="",width:h=1,height:m=1}=(0,L.Z)(a.images)||{};return p&&(0,s.jsx)(r.Ee,{alt:(0,M.GH)(c,d,o),fit:e,naturalHeight:m??1,naturalWidth:h??1,onError:i,onLoad:n,src:p,srcSet:(0,M.gA)({slot:a,highResOnly:t})})},R=(void 0!==a||(a=i(621539)).hash&&"83e61e6fc89222c2a0b03276839f44a5"!==a.hash&&console.error("The definition of 'CloseupCarousel_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function V({displayHeight:e,displayWidth:t,pinKey:i}){(0,l.Z)("CloseupCarousel","/app/common/react/components/closeup/CloseupBody/CloseupCarousel/CloseupCarousel.tsx");let{logContextEvent:n}=(0,j.u)(),{closeupWithinMasonryEnabled:a,isCloseupMediaViewerOpen:o,showProductDetailPage:d,peekCloseupEnabled:c}=(0,g.x4)(),{pauseAutoplay:u,setCurrentVideo:p}=(0,z.G)(),{isEnabled:h}=(0,f.Z)({dangerouslySkipActivation:!1}),{carouselInfo:m,mainImage:y}=(0,w.G)(),{carouselData:P,handleCarouselSwipe:I}=m||{},{index:S=0}=P||{},{height:L,width:M}=y,V=(0,C.Z)(R,i),W=(0,v.Z)({showProductDetailPage:!!V.isEligibleForPdp}),{entityId:O}=V,K=(0,_.useRef)(null),H=(0,D.Z)(V),N=V.isEligibleForPdp?H():void 0,$=V.isEligibleForPdp?144:void 0,G=V.isEligibleForPdp?3:void 0,U=(0,E.A)(),X=(0,_.useCallback)(e=>{e>=1&&((0,A.Nx)("image"),U&&U.markConstraintComplete("image"))},[U]),Y=(0,_.useMemo)(()=>({viewParameter:d?144:156,view:3,component:d?14012:179,objectId:O}),[O,d]),J=(0,_.useCallback)(()=>{p({pinId:O,isPromoted:!1})},[p,O]),q=(0,_.useCallback)(()=>{u({pinId:O,isPromoted:!1})},[u,O]);(0,_.useEffect)(()=>{P?.carousel_slots?.find(e=>e.videos?.video_list)&&n({event_type:120,view_type:Y.view,view_parameter:Y.viewParameter,component:Y.component,object_id_str:Y.objectId})},[n,P?.carousel_slots,Y]);let Q=K.current&&c,ee=(0,_.useCallback)((i,n,a,l,d)=>{let c,u;return i.videos?.video_list?(c=(0,s.jsx)(k,{contextLogData:Y,height:e,isFocused:a,onFocus:l,onUnfocus:d,pinId:O,pinKey:V,videoList:i.videos.video_list,width:t}),u=i.videos.id):(c=(0,s.jsx)(b.Z,{_enableViewTransitions:!0,suppressViewTransitionTags:o||n!==S,type:"image",children:(0,s.jsx)(F,{fit:"cover",onLoad:()=>X(n),slot:i,slotIndex:n})}),u=i.image_signature),(0,s.jsx)(r.xu,{height:"100%",width:"100%",children:c},`${O}-${u||n}`)},[S,o,O,Y,e,V,t,X]);return(0,s.jsx)(r.xu,{ref:K,dangerouslySetInlineStyle:{__style:{aspectRatio:a?(0,x.GJ)(M,L):void 0,contain:"strict",justifySelf:"center"}},height:"100%",overflow:a?"hidden":void 0,rounding:a&&!W?4:void 0,width:a?void 0:"100%",children:h?(0,s.jsxs)(_.Fragment,{children:[(0,s.jsx)(Z.Z,{carouselData:{...P,type:"canonical"},contextLogData:N,height:e,id:O,impressionType:"Pin",index:S,slideWidth:t,view:G??3,viewParameter:$??156}),(0,s.jsx)(T.Z,{itemHeight:e,items:P?.carousel_slots||[],itemWidth:t,mode:"single",onIndexChange:I,renderItem:({item:e,index:t,isFocused:i,onFocus:n,onUnfocus:a})=>ee(e,t,i,n,a),selectedIndex:S,showNavigationButtons:!0,showScrollMarkers:!V.isEligibleForPdp})]}):(!c||Q)&&(0,s.jsx)(B.Z,{containerRef:K.current,contextLogData:N,height:e,id:O,index:S,responsiveSizing:a,slideWidth:t,view:G,viewParameter:$,children:(P?.carousel_slots||[]).map((e,t)=>ee(e,t,S===t,J,q))})})}var W=i(592821),O=i(573631),K=i(291892);let H=(0,_.memo)(function({borderStyle:e,dominantColor:t,imageWithPreview:i,fit:n,sizes:a,srcSet:o}){let l=(0,E.A)(),d=(0,_.useCallback)(()=>{(0,A.Nx)("image"),l&&l.markConstraintComplete("image")},[l]),{closeupWithinMasonryEnabled:c,isCloseupMediaViewerOpen:u,showProductDetailPage:p}=(0,g.x4)(),{fiftyPercentWidth:h}=(0,W.Re)(),m=(0,v.Z)({showProductDetailPage:p}),y=(0,O.b)(),f="closeup-image-main",b=""!==i.mainImage.src?(0,s.jsx)(r.xu,{"data-test-id":f,height:"100%",width:"100%",children:(0,s.jsx)(K.Z,{_enableViewTransitions:!0,_fixCompletedOnLoad:!0,alt:i.mainImage.alt,borderStyle:m?void 0:e,color:t,elementTiming:`${f}-MainPinImage`,fetchPriority:"high",fit:n,naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth,onLoad:d,sizes:a,src:i.mainImage.src,srcSet:o,suppressViewTransitionTags:u})}):null;return(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{aspectRatio:c?(0,x.GJ)(i.naturalWidth,i.naturalHeight):void 0,contain:"strict",justifySelf:c?"center":void 0}},height:"100%",maxWidth:h,overflow:c?"hidden":void 0,rounding:m?void 0:6,width:c?void 0:"100%",children:!y&&i.previewImage?.src?(0,s.jsx)(r.Ee,{alt:i.previewImage?.alt??"",color:t,fetchPriority:"high",fit:n,naturalHeight:i.naturalHeight,naturalWidth:i.naturalWidth,role:"img",src:i.previewImage.src,children:b}):b})}),N=e=>((0,l.Z)("CloseupImage","/app/common/react/components/closeup/CloseupBody/CloseupImage/CloseupImage.tsx"),(0,s.jsx)(H,{...e}));var $=i(364674),G=i(856782),U=i(899678),X=i(821806);let Y=112+G.Z;function J({digitalMediaType:e,shouldMoveAILabel:t,isViewedByOwnerEmployeeOrAgency:i}){return(0,l.Z)("AICloseupLabelWrapper","/app/common/react/components/closeup/CloseupBody/CloseupImage/AICloseupLabelWrapper.tsx"),(0,s.jsxs)(_.Fragment,{children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${t?Y:56}px)`}),(0,s.jsx)(r.xu,{display:"flex",justifyContent:"start",maxWidth:"147px",paddingX:G.Z,children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(U.Z,{children:(0,s.jsx)($.Z,{digitalMediaType:e,isViewedByOwnerEmployeeOrAgency:i})})})})]})}var q=i(630119);let Q=({children:e,horizontalOffset:t=0,name:i,verticalOffset:n=0})=>{(0,l.Z)("OverlayLayer","/app/common/react/components/closeup/CloseupBody/CloseupImage/OverlayLayer.tsx");let a=new r.Ry(1),{closeupWithinMasonryEnabled:o}=(0,g.x4)(),{mainImage:d}=(0,w.G)(),{height:c,width:u}=d;return(0,s.jsx)(r.xu,{bottom:!o,dangerouslySetInlineStyle:{__style:{aspectRatio:o?u/c:void 0,justifySelf:o?"center":void 0,pointerEvents:"none",padding:o?void 0:`${n}px ${t}px`}},"data-test-id":`closeup-image-overlay-layer-${i}`,height:"100%",left:!0,marginEnd:"auto",marginStart:"auto",position:"absolute",right:!0,top:!o,zIndex:a,children:e})};var ee=i(629178),et=i(139707),ei=i(355940),en=i(821342),ea=i(218831);function eo({carouselData:e,children:t,disableAnimations:i=!1,displayWidth:n,hide:a}){(0,l.Z)("AnimatedFab","/app/www/common/Carousel/AnimatedFab.tsx");let o=(0,_.useCallback)(()=>(({carouselData:e,containerWidth:t,slotWidth:i})=>{let{index:n,carousel_slots:a}=e||{},o=Math.floor(i);return void 0===n||!a||n>=a.length-1?0:t-o})({carouselData:e,containerWidth:n,slotWidth:n}),[e,n]),[d,c]=(0,_.useState)(o()),[u,p]=(0,_.useState)(i),[h,m]=(0,_.useState)(),g=(0,_.useCallback)(()=>{c(o())},[o]);return(0,_.useEffect)(()=>{let e=!0;return i||(p(!1),m(t=>(clearTimeout(t),setTimeout(()=>{e&&(g(),a||p(!0))},500)))),()=>{e=!1}},[e?.index,i,g,a]),(0,_.useEffect)(()=>()=>clearTimeout(h),[h]),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{marginRight:d,transition:i?void 0:"opacity 500ms, visibility 500ms ease-in-out",visibility:u?"visible":"hidden"}},"data-test-id":"animated-fab",opacity:+!!u,children:t})}var el=i(828942),er=i(8512);let es=(0,_.lazy)(()=>i.e("12780").then(i.bind(i,448372))),ed=(0,_.lazy)(()=>i.e("12780").then(i.bind(i,458684))),ec=(0,_.lazy)(()=>i.e("74993").then(i.bind(i,613047))),eu=(0,_.lazy)(()=>i.e("95804").then(i.bind(i,984723))),ep=(0,_.lazy)(()=>Promise.resolve().then(i.bind(i,935410))),eh=(0,_.lazy)(()=>i.e("85050").then(i.bind(i,966421))),em=({auxData:e,carouselInfo:t,domain:i,handleMediaButtonClick:n,isHovered:a,link:o,mediaViewerExpandButtonRef:d,onImageClick:c,pin:u,showCarouselControls:p,showCarouselEllipsis:h,showCloseupShopDomainLinkButton:m,showDebugSignalsFeedbackButton:g,showDomainLink:y,showDomainLinkButton:b,showFlashlightButton:P,showPinTagButton:I,trafficSource:C,maxCloseupImageWidth:S,shouldPadImage:k,verticalOffset:j,horizontalOffset:Z})=>{(0,l.Z)("CloseupImageOverlay","/app/common/react/components/closeup/CloseupBody/CloseupImage/CloseupImageOverlay.tsx");let{isRelatedPins10PercentVisible:T}=(0,ea.K)(),{mainImage:E,mediaViewerImage:A}=(0,w.G)(),D=(0,en.Z)(),{peekRedesignFastFollowsEnabled:z}=(0,et.Z)(E),{isEnabled:B}=(0,f.Z)({dangerouslySkipActivation:!1}),L=(0,v.Z)({showProductDetailPage:!!u.is_eligible_for_pdp}),[M,F]=(0,_.useState)(!1),R=a||M,V=(0,_.useCallback)(()=>F(!0),[]),W=(0,_.useCallback)(e=>{e.currentTarget.contains(e.relatedTarget)||F(!1)},[]),{containerWidth:O}=(0,x.ZP)({carouselData:t?.carouselData,mainImage:E,maxCloseupImageWidth:S,shouldPadImage:k,pinKey:{type:"deprecated",data:u}}),K=4*G.Z,H=K+(T||L?0:56),N=48+H+8,$=e=>z?{bottom:e,position:T?"absolute":"sticky",transition:T?"position 100ms cubic-bezier(0, 0, 1, 1)":"position 50ms cubic-bezier(0, 0, 1, 1)"}:{bottom:e,position:"sticky"},{isCloseupMediaViewerEnabled:Y}=(0,ee.Z)({isShufflePin:!!u?.shuffle}),em=u&&u.origin_pinner&&D.isAuth&&D.id===u.origin_pinner.id||!u?.is_go_linkless,eg=(0,er.zX)(u.digital_media_source_type),ey=(b||m)&&em,e_=ey&&!o.startsWith("https://i.pinimg.com"),ef=!t||0===t.carouselData.index;return(0,s.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{display:"contents"}},onBlur:W,onFocus:V,children:[y&&(0,s.jsx)(Q,{horizontalOffset:Z,name:"domain-link",verticalOffset:j,children:(0,s.jsxs)(r.kC,{alignItems:"center",height:"100%",justifyContent:"center",width:"100%",children:[(0,s.jsx)(r.xu,{paddingX:1,children:(0,s.jsx)(r.JO,{accessibilityLabel:"",color:"inverse",icon:"arrow-up-right",size:16})}),(0,s.jsx)(r.xu,{paddingX:1,children:(0,s.jsx)(r.xv,{color:"inverse",weight:"bold",children:i})})]})}),p&&t&&!B&&(0,s.jsxs)(Q,{horizontalOffset:Z,name:"carousel-controls",verticalOffset:j,children:[(0,s.jsx)(ei.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselSliders",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(ed,{backNode:(0,s.jsx)(el.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"back",showFab:R}),carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,forwardNode:(0,s.jsx)(el.Z,{backgroundColor:"default",hoverColor:"secondary",iconColor:"default",iconType:"forward",showFab:R}),handleCarouselSwipe:t.handleCarouselSwipe,pinKey:{type:"deprecated",data:u},sliderStyleOverride:{padding:"30px 12px"},viewParameter:t.viewParameter,viewType:t.viewType})})}),(0,s.jsx)(r.xu,{alignItems:"end",bottom:!0,display:"flex",height:405,justifyContent:"center",left:!0,padding:G.Z,position:"absolute",right:!0,children:!b&&h&&(0,s.jsx)(ei.Z,{name:"SafeSuspense_CloseupImageOverlay_CarouselEllipsis",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(U.Z,{children:(0,s.jsx)(es,{carouselData:{carouselSlots:t.carouselData.carousel_slots?.map(({id:e,title:t})=>({id:e,title:t})),entityId:t.carouselData.id??"",index:t.carouselData.index},carouselIndex:t.carouselData&&t.carouselData.index,componentType:t.componentType,handleCarouselSwipe:t.handleCarouselSwipe,isCloseup:!0,pinKey:{type:"deprecated",data:u},variant:"default",viewParameter:t.viewParameter,viewType:t.viewType})})})})})]}),P&&(0,s.jsxs)(Q,{horizontalOffset:Z,name:"flashlight-button",verticalOffset:j,children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${48+K}px)`}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:$(H)},display:"flex",justifyContent:"end",paddingX:G.Z,right:!0,children:(0,s.jsx)(ei.Z,{name:"SafeSuspense_CloseupImageOverlay_ShopButton",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(U.Z,{children:(0,s.jsx)(eu,{imageSignature:u.image_signature,pinId:u.id,show:ef,trafficSource:C})})})})})]}),Y&&(0,s.jsxs)(Q,{horizontalOffset:Z,name:"media-viewer-button",verticalOffset:j,children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${P?(48+K)*2:K+48}px)`}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:$(N)},display:"flex",justifyContent:"end",paddingX:G.Z,right:!0,children:(0,s.jsx)(eo,{carouselData:t?.carouselData,disableAnimations:!0,displayWidth:O,children:(0,s.jsx)(ei.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(U.Z,{children:(0,s.jsx)(r.xu,{ref:d,onMouseDown:()=>{new Image().src=A.url},children:(0,s.jsx)(ep,{animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:u.image_signature,onTap:n,variant:"view-larger"})})})})})})})]}),g&&(0,s.jsxs)(Q,{horizontalOffset:Z,name:"debug-signals-feedback",verticalOffset:j,children:[(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{height:"calc(100% - 115px)"}}}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:$(H)},display:"flex",justifyContent:"end",paddingX:G.Z,right:!0,children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(eh,{pinKey:{type:"deprecated",data:u}})})})]}),u.digital_media_source_type&&eg&&(0,s.jsx)(Q,{horizontalOffset:Z,name:"ai-generated-label",verticalOffset:j,children:(0,s.jsx)(J,{digitalMediaType:u.digital_media_source_type,isViewedByOwnerEmployeeOrAgency:u.is_viewed_by_owner_or_employee_or_partner_of_business||!1,shouldMoveAILabel:e_&&R})}),ey&&(0,s.jsxs)(Q,{horizontalOffset:Z,name:"domain-link-button",verticalOffset:j,children:[(0,s.jsx)(r.xu,{height:`calc(100% - ${48+K}px)`}),(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{...$(H),opacity:+!!R,pointerEvents:R?"auto":"none"}},display:"flex",justifyContent:"start",maxWidth:"calc(100% - 88px)",paddingX:G.Z,tabIndex:-1,children:(0,s.jsx)(q.Z,{auxData:e,domain:i,link:o,onClick:c,pinKey:{type:"deprecated",data:u},trafficSource:C})})]}),I&&(0,s.jsx)(Q,{horizontalOffset:Z,name:"tag-button",verticalOffset:j,children:(0,s.jsx)(ei.Z,{name:"SafeSuspense_CloseupImageOverlay_CloseupTagButton",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(U.Z,{children:(0,s.jsx)(ec,{pin:u})})})})})]})};var eg=i(516202),ey=i(995415),e_=i(846721),ef=i(573647),ex=i(979904),ev=i(102134),eb=i(890479),ew=i(673616),eP=i(364843),eI=i(790427),eC=i(44344),eS=i(78762),ek=i(756334);let ej=(0,eS.Z)(()=>Promise.all([i.e("57207"),i.e("81931"),i.e("95853"),i.e("71309")]).then(i.bind(i,286533)),void 0,e=>286533,"app-common-react-components-closeup-CloseupShuffle-CloseupShuffle",e=>["57207","81931","95853","71309"]),eZ=(0,_.memo)(({borderStyle:e,closeupWithinMasonryEnabled:t,imageWithPreview:i,peekRedesignFastFollowsEnabled:n,sizes:a,srcSet:o})=>(0,s.jsx)(ek.Z,{metricName:"CloseupImage",children:(0,s.jsx)(eb.Z,{id:"CloseupImage",children:(0,s.jsx)(N,{borderStyle:e,dominantColor:W.yc,fit:n||t?void 0:"contain",imageWithPreview:i,sizes:a,srcSet:o})})}));function eT({onImageClick:e,isHovered:t,pin:i,shouldPadImage:n,trafficSource:a,viewParameter:o,isORBACProfileManager:d,handleMediaButtonClick:c}){let u,m;(0,l.Z)("CloseupImageContainer","/app/common/react/components/closeup/CloseupBody/CloseupImage/CloseupImageContainer.tsx");let{originalImageUrl:y,imageSignature:f,link:b,isScenePin:P,disablePinTagButton:I,showProductDetailPage:C,maxCloseupImageWidth:S,imageWithPreview:k}=(0,e_.Z)({pinKey:{type:"deprecated",data:i}}),j=(0,en.Z)(),{mainImage:Z,carouselInfo:T,srcSet:E,srcSizes:A}=(0,w.G)(),z=(0,ev.Z)(),{peekRedesignFastFollowsEnabled:B}=(0,et.Z)(Z),L=(0,_.useRef)(null),M=(0,_.useRef)(null),{domain:F,shuffle:R}=i,O=!!T?.carouselData,{naturalWidth:K,naturalHeight:H}=k,{closeupWithinMasonryEnabled:N,peekCloseupEnabled:$,clientTrackingParams:G,showCloseupContentRight:U,viewportSize:X,setCalculatedImageHeight:Y}=(0,g.x4)(),J=(0,v.Z)({showProductDetailPage:!!i.is_eligible_for_pdp}),{isRTL:q}=(0,p.B)();(0,_.useEffect)(()=>{L.current&&Y&&Y(L.current.clientHeight)},[L,Y]);let Q=(0,_.useMemo)(()=>k,[k]),{borderStyle:ee}=(0,_.useMemo)(()=>(0,h.Z)({isSideBySide:U,isPadded:n,isRTL:q,closeupWithinMasonryEnabled:N,peekCloseupEnabled:$}),[U,n,q,N,$]),{borderStyle:ei}=(0,h.Z)({isSideBySide:U,isPadded:n,isRTL:q,closeupWithinMasonryEnabled:N,peekCloseupEnabled:$}),{containerHeight:ea,containerWidth:eo,horizontalOffset:el,verticalOffset:er}=(0,x.ZP)({carouselData:T?.carouselData,mainImage:Z,maxCloseupImageWidth:S,shouldPadImage:n,pinKey:{type:"deprecated",data:i}}),[es,ed]=(0,_.useState)({width:eo,height:ea}),ec=(0,_.useCallback)(()=>{let e=eo>ea?ea/eo:1,t=L.current;if(!t)return;let i=t.offsetWidth*e;ed(e=>{let n={height:t.offsetHeight||i,width:t.offsetWidth};return e.height!==n.height||e.width!==n.width?n:e})},[ea,eo]);(0,eC.Z)(ec,L);let eu=!!R&&z(),ep=(0,ew.Z)({isHiddenPin:i.is_hidden,isUnsafePin:i.is_unsafe}),{currentDomain:eh}=(0,ey.Z)({carouselData:i.carousel_data&&{carouselSlots:i.carousel_data.carousel_slots&&i.carousel_data.carousel_slots.map(e=>({domain:e.domain,link:e.link})),index:i.carousel_data?.index},domain:i.domain}),eb=eh||F,eS={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0};if(T&&T.carouselData&&T.carouselData.id){let{carousel_slots:e=[],id:t,index:i=0}=T.carouselData;u=e[i]&&e[i].link,eS.carousel_slot_id=e[i]&&e[i].id,eS.carousel_data_id=t,eS.carousel_slot_index=i,eb=e[i]&&e[i].domain||eb}let ek=(0,D.Z)({type:"deprecated",data:i})();ek&&(eS.commerce_data=ek.commerce_data);let eT=u||b||y||"",eE=(0,s.jsx)(eZ,{borderStyle:ee,closeupWithinMasonryEnabled:N,imageWithPreview:Q,peekRedesignFastFollowsEnabled:B,sizes:A,srcSet:E}),eA=eE;O&&(eA=(0,s.jsx)(V,{displayHeight:es?.height,displayWidth:es?.width,pinKey:{type:"deprecated",data:i}})),eu&&(eA=(0,s.jsx)(ej,{clientTrackingParams:G,naturalHeight:H,naturalWidth:K,pinId:i.id,shuffleId:R?.id,children:(0,s.jsx)(r.xu,{width:"100%",children:eE})}));let{maxHeight:eD,fiftyPercentWidth:ez,fiftyPercentHeight:eB}=(0,W.Re)(),{maxHeight:eL}=(0,ex.Z)({pinKey:{type:"deprecated",data:i}}),{maxHeight:eM}=(0,ef.Z)({showProductDetailPage:!!i.is_eligible_for_pdp,mainImage:Z,skipAspectRatioCheck:O}),{showCarouselControls:eF,showCloseupShopDomainLinkButton:eR,showDebugSignalsFeedbackButton:eV,showDomainLink:eW,showDomainLinkButton:eO,showFlashlightButton:eK,showPinTagButton:eH}=(0,eg.Z)({carouselInfo:T,disablePinTagButton:I,domain:eb||"",hasMetTrustAndSafetyCheck:ep,isCollageEnabled:eu,isEmployee:j.isAuth&&!!j.isEmployee,isORBACProfileManager:d,isScenePin:P,navLink:eT,pinKey:{type:"deprecated",data:i},showProductDetailPage:C});return J?m=eM:N?m=eL:B||(m="sm"===X?eB:eD),(0,s.jsxs)(r.xu,{ref:L,alignItems:"stretch",alignSelf:N?"center":void 0,dangerouslySetInlineStyle:{__style:{aspectRatio:(0,x.GJ)(K,H),backgroundColor:N?void 0:W.yc}},"data-test-id":"closeup-body-image-container",display:"flex",height:N?"100%":ea,maxHeight:m,maxWidth:ez,position:"relative",width:N?"100%":eo,children:[(0,s.jsxs)(r.xu,{dangerouslySetInlineStyle:{__style:{...J?void 0:ei,display:N?"grid":"block"}},"data-test-id":"closeup-image",height:"auto",overflow:"hidden",width:"100%",children:[eA,(0,s.jsx)(em,{auxData:eS,carouselInfo:T,domain:eb??F??"",handleMediaButtonClick:c,horizontalOffset:el,imageSignature:f,isHovered:t,link:eT,maxCloseupImageWidth:S,mediaViewerExpandButtonRef:M,onImageClick:e,pin:i,shouldPadImage:n,showCarouselControls:eF,showCarouselEllipsis:!C,showCloseupShopDomainLinkButton:eR,showDebugSignalsFeedbackButton:eV,showDomainLink:eW,showDomainLinkButton:eO,showFlashlightButton:eK,showPinTagButton:eH,trafficSource:a,verticalOffset:er,viewParameter:o})]}),M&&(0,s.jsx)(r.mh,{zIndex:eI.lI,children:(0,s.jsx)(eP.Qp,{anchor:M.current,experienceIds:[506692],flyoutSize:"md",idealDirection:"up",placementId:12,showCaret:!0,textWeight:"normal"})})]})}var eE=i(96413),eA=i(677921),eD=i(453179),ez=i(716920),eB=i(123317),eL=i(724084),eM=i(543561),eF=i(341742),eR=i(239728),eV=i(458460);let eW=(e,t)=>e?13799:0===t?227:228;var eO=i(71157),eK=i(996434),eH=i(886981),eN=i(281106),e$=i(461413),eG=i(181663),eU=i(445698),eX=i(589357);let eY={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",paddingTop:"30px",top:0};function eJ({onImageClick:e,isHovered:t,pin:i,shouldPadImage:n,trafficSource:a,viewParameter:o,isORBACProfileManager:d,handleMediaButtonClick:c}){let u;(0,l.Z)("SIIPMediaContainer","/app/common/react/components/closeup/StaticImageIdeaPin/SIIPMediaContainer.tsx");let{originalImageUrl:m,imageSignature:y,link:f,isScenePin:b,disablePinTagButton:P,maxCloseupImageWidth:C,imageWithPreview:S}=(0,e_.Z)({pinKey:{type:"deprecated",data:i}}),k=(0,en.Z)(),{closeupWithinMasonryEnabled:j,peekCloseupEnabled:Z,viewportSize:T,clientTrackingParams:z,showCloseupContentRight:B}=(0,g.x4)(),{isRTL:L}=(0,p.B)(),M=(0,_.useRef)(null),{maxHeight:F,fiftyPercentHeight:R,fiftyPercentWidth:V}=(0,W.Re)(),{maxHeight:O}=(0,ex.Z)({pinKey:{type:"deprecated",data:i}}),[K,H]=(0,_.useState)(!1),$=(0,v.Z)({showProductDetailPage:!!i.is_eligible_for_pdp}),{borderStyle:G}=(0,h.Z)({isSideBySide:B,isPadded:n,isRTL:L,closeupWithinMasonryEnabled:j,peekCloseupEnabled:Z}),U=(0,ew.Z)({isHiddenPin:i.is_hidden,isUnsafePin:i.is_unsafe}),{mainImage:Y}=(0,w.G)(),{domain:J="",id:q,story_pin_data:Q}=i,ee={carousel_slot_id:void 0,carousel_data_id:void 0,carousel_slot_index:void 0,commerce_data:void 0},et=(0,D.Z)({type:"deprecated",data:i})();et&&(ee.commerce_data=et.commerce_data);let ea=f||m||"",{data:eo=[]}=(0,eH.Z)({name:"StoryPinTaggedProductsResource",options:{id:i.id},noCache:!0}),{pages:el=[]}=Q||{},er=[5,6,2],es=el.filter(e=>{let t=e?.layout;return void 0!==t&&!er.includes(t)}),{activePageIndex:ed,captions:ec,currentPage:eu,handleMute:ep,handlePageChange:eh,handlePause:ey,handlePausePlay:ef,handlePlay:ev,handleUpdateVideoInfo:eb,handleVideoEnd:eP,handleVideoScrubbingNewPage:eI,handleWatchAgain:eC,isActive:eS,isSeeking:ek,mute:ej,progressInfo:eZ,showEndCard:eT}=(({pages:e,viewType:t,viewParameter:i,pinId:n})=>{(0,l.Z)("useHandleMultiPageIdeaPinVideo","/app/common/react/components/closeup/StaticImageIdeaPin/useHandleMultiPageIdeaPinVideo.tsx");let{clearSeekTime:a}=(0,eL.RC)(),{setIdeaPinActivePage:o}=(0,eV.Ut)(),[r,s]=(0,_.useState)(0),[d,c]=(0,_.useState)(!0),[u,h]=(0,_.useState)(!0),[m,g]=(0,_.useState)(!1),[y,f]=(0,_.useState)(null),x=(0,I.Z)(),v=e[r],b=(0,ez.g)(),w=(0,E.A)(),P=(0,_.useRef)(null),{blocks:[C]=[null]}=(0,eA.Z)({storyPinBlocks:v?.blocks||[],blocksToRender:[eB.h8.VIDEO]}),{seekTimes:S}=(0,eL.Hx)(),k=S&&S[n],j=C?.type===eB.h8.VIDEO&&C?.video,Z=(0,p.B)().locale.toLowerCase(),T=j&&(j?.video_list?.V_720P?.captions_urls||j?.video_list?.V_HLSV3_MOBILE?.captions_urls)||{},D=Z&&T[Z]||Object.values(T)[0]||"",z=(0,_.useCallback)(n=>{(0,A.sX)("startNewPwt"),w&&w.abort("startNewPwt"),b&&(b.abort("startNewPwt"),b.start(),b.addBinaryAnnotation("page.current.index",n,"I16"),b.addBinaryAnnotation("page.count",e.length,"I16"),b.addBinaryAnnotation("view.type",t,"I32"),b.addBinaryAnnotation("view.parameter",i,"I32"))},[e.length,w,b,i,t]),B=(0,_.useCallback)(e=>{e&&e instanceof eM.B7&&(e.clear(),e=null)},[]),L=(0,_.useCallback)(t=>{B(P.current),!j&&e.length>1&&(P.current=new eM.B7(e=>{f({currentTime:e<1?e:1,duration:1})},()=>{t<e.length-1?(B(P.current),F(t+1)):(g(!0),c(!1))},eD.oN))},[e]),M=(0,_.useCallback)(e=>{f({currentTime:0,duration:1}),L(e)},[L]);(0,eF.Z)(()=>(w&&(w.addBinaryAnnotation("page.current.index",r,"I16"),w.addBinaryAnnotation("page.count",e.length,"I16"),w.addBinaryAnnotation("view.type",t,"I32"),w.addBinaryAnnotation("view.parameter",i,"I32")),(0,A.rt)("page.current.index",r,"I16"),(0,A.rt)("page.count",e.length,"I16"),(0,A.rt)("view.type",t,"I32"),(0,A.rt)("view.parameter",i,"I32"),M(r),()=>{P.current&&P.current instanceof eM.B7&&P.current.clear()}));let F=(0,_.useCallback)(e=>{d||c(!0),m&&g(!1),M(e),e!==r&&a(),s(e),o(e),z(e)},[r,a,M,d,o,m,z]);(0,_.useEffect)(()=>{if(m&&g(!1),P.current&&k){let e=P.current;e.pause(),e.remaining=eD.oN-k*eR.gJ,f({currentTime:k/eD.P6,duration:1})}},[k]);let R=()=>{c(!1),P.current&&P.current.pause(),x({event_type:9324,view_type:t,view_parameter:i,component:eW(m,r),object_id_str:n,aux_data:{story_pin_page_id:r}})},V=()=>{if(c(!0),P.current){let e=P.current;k&&k>0&&a(),e.resume()}else y||M(r);g(!1),x({event_type:9323,view_type:t,view_parameter:i,component:eW(m,r),object_id_str:n,aux_data:{story_pin_page_id:r}})};return{activePageIndex:r,captions:D,currentPage:v,handleMute:()=>{h(e=>!e)},handlePageChange:F,handlePause:R,handlePausePlay:()=>{m||(d?R():V())},handlePlay:V,handleUpdateVideoInfo:e=>{f({currentTime:e?.currentTime??0,duration:e?.duration??1})},handleVideoEnd:a=>{a===e.length-1&&(g(!0),c(!1),o(0)),a===r&&r<e.length-1&&(F(r+1),x({event_type:101,view_type:t,view_parameter:i,component:eW(m,r),element:12261,object_id_str:n}))},handleVideoScrubbingNewPage:e=>{m&&g(!1),M(e),s(e),o(e),z(e)},handleWatchAgain:()=>{F(0)},isActive:d,isSeeking:!!k,mute:u,progressInfo:y,setMute:h,showEndCard:m}})({pages:es,viewType:3,viewParameter:o,pinId:q}),{blocks:[eJ]=[null]}=(0,eA.Z)({storyPinBlocks:eu?.blocks||[],blocksToRender:[eB.h8.IMAGE,eB.h8.VIDEO]}),eq=eJ?.type===eB.h8.VIDEO,eQ=eq||es.length>1,{fontsLoaded:e0,mediaDataReceived:e1}=(0,eU.tq)({hasPin:!!i,pages:el}),{showCloseupShopDomainLinkButton:e2,showDebugSignalsFeedbackButton:e6,showDomainLink:e8,showDomainLinkButton:e3,showFlashlightButton:e4,showPinTagButton:e7}=(0,eg.Z)({disablePinTagButton:P,domain:J,hasMetTrustAndSafetyCheck:U,isEmployee:k.isAuth&&!!k.isEmployee,isScenePin:b,navLink:ea,pinKey:{type:"deprecated",data:i},isORBACProfileManager:d}),{containerHeight:e9,containerWidth:e5,horizontalOffset:te,letterBoxAspectRatio:tt,letterBoxedHeight:ti,letterBoxedWidth:tn,verticalOffset:ta}=(0,x.ZP)({mainImage:Y,maxCloseupImageWidth:C,pinKey:{type:"deprecated",data:i}}),{height:to,width:tl}=Y;return i.story_pin_data?.is_deleted?(0,s.jsx)(e$.Z,{color:"secondary",height:640,rounding:4,width:508}):(j?u=O:Z&&(u="sm"===T?R:F),(0,s.jsx)(r.xu,{alignSelf:j?"center":void 0,dangerouslySetInlineStyle:{__style:{...$?void 0:G,aspectRatio:j?(0,x.GJ)(tl,to):void 0,background:W.yc}},"data-test-id":"closeup-body-image-container",height:j?"100%":e9,maxHeight:$?void 0:u,maxWidth:V,onMouseEnter:()=>{eQ&&H(!0)},onMouseLeave:()=>{H(!1)},position:"relative",width:j?"100%":e5,children:eu?(0,s.jsxs)(_.Fragment,{children:[!eQ&&(0,s.jsx)(em,{auxData:ee,domain:J,handleMediaButtonClick:c,imageSignature:y,isHovered:t,link:ea,maxCloseupImageWidth:C,mediaViewerExpandButtonRef:M,onImageClick:e,pin:i,shouldPadImage:n,showCloseupShopDomainLinkButton:e2,showDebugSignalsFeedbackButton:e6,showDomainLink:e8,showDomainLinkButton:e3,showFlashlightButton:e4&&e1,showPinTagButton:e7,trafficSource:a,viewParameter:o}),(K||!eS)&&(0,s.jsxs)(r.xu,{children:[(0,s.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...eX.Ul,flexDirection:"column-reverse"}},display:"flex",height:eX.hy,paddingX:6,position:"absolute",width:"100%",zIndex:eB.Gf,children:(0,s.jsx)(eG.Z,{activePageIndex:ed,captionsUrl:ec,handleMute:ep,handlePause:ey,handlePausePlay:ef,handlePlay:ev,handleVideoScrubbingNewPage:eI,handleWatchAgain:eC,inMilliseconds:!0,isMuted:ej,isPanelOpen:!0,isPlaying:eS,isStoryPin:!0,onPageSelect:e=>eh(e),pageCount:es.length,pages:es,pinId:q,progressInfo:eZ,showEndCard:eT,showVideoControls:!0,viewParameter:156})}),(0,s.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...eY}},"data-test-id":"music-attribution",display:"flex",justifyContent:"center",overflow:"hidden",paddingY:5,position:"absolute",width:"100%",zIndex:eB.Gf,children:(0,s.jsx)(eE.Z,{handlePause:ey,handlePlay:ev,musicAttributions:eu?.music_attributions,shouldMute:eu?.should_mute,showEndCard:eT})})]}),(0,s.jsxs)(r.iP,{disabled:!K||eT,fullHeight:!0,onTap:ef,children:[(0,s.jsx)(eK.Z,{activePageIndex:ed,clientTrackingParams:z,customEndCard:!0,fontsLoaded:e0,horizontalOffset:te,isActive:eS,muteVideos:ej,onEnded:eP,onUpdateVideoInfo:eb,ownerId:i.native_creator?.id??"",page:eu,pageAspectRatio:tt,pageHeight:ti,pageIndex:ed,pageWidth:tn,pin:i,pinId:q,productPins:eo,shouldLogTimeSpent:!0,stillLoading:!e1,verticalOffset:ta,videoPinProgress:eZ,viewParameter:o,viewType:3}),!eT&&!ek&&es.length>1&&!eq&&(0,s.jsx)(eN.Z,{playing:eS})]}),eT&&i.native_creator&&(0,s.jsx)(ei.Z,{name:"SIIPMediaContainer_VideoEndCard",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(r.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,zIndex:eB.s5,children:(0,s.jsx)(eO.default,{clientTrackingParams:i.trackingParams||i.tracking_params,imageSrc:i.image_url??"",pinDescription:i.description??"",pinId:i.id,rounded:!1,watchAgain:eC})})})})]}):eu?null:(0,s.jsx)(N,{dominantColor:W.yc,fit:"contain",imageWithPreview:S})}))}var eq=i(73579);let eQ=e=>{(0,l.Z)("ImageContent","/app/common/react/components/closeup/CloseupBody/VisualContent/ImageContent.tsx");let{isHovered:t,onImageClick:i,pin:n,shouldPadImage:a,trafficSource:o,viewParameter:r,isORBACProfileManager:c,handleMediaButtonClick:u}=e,{isEligibleForStaticImageIdeaPin:p}=(0,eq.Z)(n.story_pin_data_id),h=p?(0,s.jsx)(eJ,{handleMediaButtonClick:u,isHovered:t,isORBACProfileManager:c,onImageClick:i,pin:n,shouldPadImage:a,trafficSource:o,viewParameter:r}):(0,s.jsx)(eT,{handleMediaButtonClick:u,isHovered:t,isORBACProfileManager:c,onImageClick:i,pin:n,shouldPadImage:a,trafficSource:o,viewParameter:r});return a?(0,s.jsx)(d,{children:h}):h};var e0=i(935410),e1=i(294851),e2=i(274320),e6=i(219057),e8=i(298638);let e3=(0,_.lazy)(()=>i.e("74993").then(i.bind(i,613047))),e4=({children:e,name:t,verticalOffset:i=0,horizontalOffset:n=0})=>(0,s.jsx)(r.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",padding:`${i}px ${n}px`}},"data-test-id":`experimental-closeup-image-overlay-layer-${t}`,left:!0,position:"absolute",right:!0,top:!0,children:e}),e7=(void 0!==o||(o=i(971203)).hash&&"89029511c11617e1150976d1002228db"!==o.hash&&console.error("The definition of 'VideoContent_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),o),e9=({closeupIsFirstPageInHistoryStack:e,customThumbnail:t,imageContainerRef:i,isWideVideo:n,pin:a,pinKey:o,shouldPadImage:c,flyoutShareProps:u,video:p,isORBACProfileManager:h,handleMediaButtonClick:y})=>{(0,l.Z)("VideoContent","/app/common/react/components/closeup/CloseupBody/VisualContent/VideoContent.tsx");let f=(0,C.Z)(e7,o),x=!!a.promoter&&!a.is_downstream_promotion,v=x&&!a.is_eligible_for_web_closeup,{access:b,should_mute:w}=a||{},P=!!b&&b.includes("tag")||h,{closeupWithinMasonryEnabled:I}=(0,g.x4)(),{closeupBodyWidth:S}=(0,ea.K)(),{checkExperiment:k}=(0,e2.r)(),j=(0,e6.Z)(),{fiftyPercentWidth:Z}=(0,W.Re)(),{maxHeight:T}=(0,ex.Z)({pinKey:f}),{isCloseupMediaViewerEnabled:E}=(0,ee.Z)({isShufflePin:!!a?.shuffle}),A=Math.max((S??1)/("number"==typeof T?T:1),(p.hls?.width??p?.mp4?.width??0)/(p.hls?.height??p?.mp4?.height??0)),D=I?S:m.Gg-m.d2,z=(0,_.useMemo)(()=>E&&k("media_viewer_videos").anyEnabled,[E,k]),B=(0,s.jsxs)(e8.Z,{isVideo:!0,isWideVideo:n,shouldPadImage:c,styleOverrides:c&&!I?{maxWidth:{maxWidth:D},minWidth:{minWidth:D},height:{},borderRadius:16}:{},variant:"default",children:[(0,s.jsx)(r.xu,{ref:i,"data-test-id":"closeup-video-with-visibility",maxHeight:T,maxWidth:Z,width:"100%",children:(0,s.jsx)(e1.Z,{aspectRatio:I?A:void 0,autoplay:!j,customThumbnail:t,flyoutShareProps:u,isPromoted:x,loop:v,muted:w||e,objectFit:I?"contain":void 0,pinId:a.id,pinKey:f,shouldMute:w,variant:"default",video:p})}),P&&(0,s.jsx)(e4,{name:"tag-button",children:(0,s.jsx)(ei.Z,{name:"SafeSuspense_VideoContent_CloseupTagButton",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(U.Z,{children:(0,s.jsx)(e3,{pin:a})})})})}),z&&(0,s.jsxs)(e4,{name:"media-viewer-button",verticalOffset:136,children:[(0,s.jsx)(r.xu,{height:"100%"}),(0,s.jsx)(r.xu,{display:"flex",justifyContent:"end",paddingX:G.Z,right:!0,children:(0,s.jsx)(ei.Z,{name:"SafeSuspense_CloseupImageOverlay_MediaViewerButton",children:(0,s.jsx)(X.Z,{children:(0,s.jsx)(U.Z,{children:(0,s.jsx)(e0.default,{animateOnMount:!1,dataTestId:"media-viewer-button",icon:"maximize",imageSignature:a.image_signature,onTap:y,variant:"view-larger"})})})})})]})]});return c?(0,s.jsx)(d,{children:B}):B};var e5=i(617778),te=i(123998);let tt=e=>{(0,l.Z)("VisualContent","/app/common/react/components/closeup/CloseupBody/VisualContent/VisualContent.tsx");let{clientTrackingParams:t,closeupIsFirstPageInHistoryStack:i,imageContainerRef:n,flyoutShareProps:a,isWideVideo:o,pin:d,shouldPadImage:c,trafficSource:u,isORBACProfileManager:p,isHovered:h,onImageClick:m,viewParameter:_,handleMediaButtonClick:f}=e,{video:x,imgSrc:b,isEmbeddedVideo:P,isYoutubePin:I}=(0,w.G)(),{closeupWithinMasonryEnabled:C}=(0,g.x4)(),S=(0,v.Z)({showProductDetailPage:!!d.is_eligible_for_pdp}),{checkExperiment:k}=(0,e2.r)(),j=(0,s.jsx)(eb.Z,{id:"ContextMenuClickthroughLogging",children:(0,s.jsx)(e5.Z,{clientTrackingParams:t,hovered:h,pinKey:{type:"deprecated",data:d},viewType:3,children:(0,s.jsx)(eb.Z,{id:"ImageContent",children:(0,s.jsx)(eQ,{handleMediaButtonClick:f,isHovered:h,isORBACProfileManager:p,onImageClick:m,pin:d,shouldPadImage:c,trafficSource:u,viewParameter:_})})})});x&&(j=(0,s.jsx)(eb.Z,{id:"VideoContent",children:(0,s.jsx)(e9,{closeupIsFirstPageInHistoryStack:i,customThumbnail:b,flyoutShareProps:a,handleMediaButtonClick:f,imageContainerRef:n,isORBACProfileManager:p,isWideVideo:o,pin:d,pinKey:{type:"deprecated",data:d},shouldPadImage:c,video:x})}));let Z="50%";if(P){let e=d.attribution&&(d.attribution.author_name||d.attribution.url)?d.attribution.provider_name:null;"soundcloud"===e?Z="30%":"vin"===e&&(Z="100%"),j=(0,s.jsx)(eb.Z,{id:"EmbeddedVideoContent",children:(0,s.jsx)(y,{embedUrl:d.embed?.src,isWideVideo:o,paddingBottom:Z,shouldPadImage:c})})}let T=k("web_closeup_youtube_player").group;if(I&&["enabled","enabled_autoplay","enabled_delay","employees"].includes(T)){let e=(0,eD.Mt)(d.link),t=["enabled_autoplay","enabled_delay"].includes(T),i=`https://www.youtube.com/embed/${e}?autoplay=${+!!t}&mute=${+!!t}&fs=0`;j=(0,s.jsx)(eb.Z,{id:"EmbeddedVideoContent-2",children:(0,s.jsx)(y,{embedUrl:i,isWideVideo:o,paddingBottom:Z,shouldPadImage:c})})}let E=(0,D.Z)({type:"deprecated",data:d}),A=d.is_eligible_for_pdp?E():void 0;return(0,s.jsx)(te.Z,{auxData:A,clientTrackingParams:t,component:85,viewParameter:_,children:(0,s.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{overflow:C?"clip":void 0}},rounding:C&&!S?4:void 0,children:j})})}},846721:function(e,t,i){i.d(t,{Z:()=>v});var n,a=i(667294);i(167912);var o=i(507438),l=i(102134),r=i(878709),s=i(821342),d=i(415546),c=i(525839),u=i(411354),p=i(453179),h=i(274320),m=i(664897),g=i(448505),y=i(7872),_=i(218831),f=i(601686);let x=(void 0!==n||(n=i(224266)).hash&&"c3027cfec56abe15f0990c2bc6707062"!==n.hash&&console.error("The definition of 'useMediaContainer_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function v({pinKey:e}){let t=(0,c.ZP)(),i=(0,s.Z)(),{checkExperiment:n}=(0,h.r)(),v=(0,g.Z)(),{mainImage:b,carouselInfo:w,previewImage:P,isGif:I,imgSrc:C}=(0,r.G)(),S=(0,l.Z)(),k=(0,d.Z)(x,e),j=(0,m.Z)(),{aggregatedPinData:Z,altText:T,autoAltText:E,isEligibleForPdp:A,isEligibleForRelatedProducts:D,pinner:z,richMetadata:B,trackedLink:L,utmLink:M,link:F,method:R,shuffle:V}=k,W=!A&&w?.carouselData,O=!!Z?.isShopTheLook,K=!!V&&S(),H=!!D&&!O&&!A&&!W&&!K,N=(0,y.nl)(i,v)&&n("web_stl_tooling",{dangerouslySkipActivation:!0}).anyEnabled,$=k.imageSpec_orig?.url,G=w?.carouselData?function(e){let{carousel_slots:t,index:i}=e;return t&&void 0!==i&&(t[i]||{}).image_signature?t[i].image_signature:null}(w.carouselData):k.imageSignature,U=(0,p.Zt)({trackedLink:L,link:F,utmLink:M}),X="catalog_bulk_create"===R||B?.products,Y=U&&X?decodeURIComponent(U):U,J=(0,y.Ms)(i,v)===z?.username&&N,{closeupWithinMasonryEnabled:q,paneWidth:Q,showProductDetailPage:ee}=(0,f.x4)(),{closeupBodyWidth:et}=(0,_.K)(),{height:ei,width:en}=b,ea=(0,a.useMemo)(()=>({naturalWidth:en,naturalHeight:ei,alt:(0,o.Z)({altText:T,autoAltText:E,i18n:t}),src:I?C:!j&&C?.startsWith("https://i.pinimg.com/")?(0,u.Z)(C)||P?.url||"":P?.url||""}),[en,ei,T,E,t,I,j,C,P?.url]),eo=(0,a.useMemo)(()=>({naturalHeight:ea.naturalHeight,naturalWidth:ea.naturalWidth,mainImage:{alt:ea.alt,src:I?ea.src:C},...!I&&{previewImage:{alt:"",src:I?"":ea.src}}}),[ea.alt,ea.naturalHeight,ea.naturalWidth,ea.src,C,I]);return{disablePinTagButton:J,imageProps:ea,imageSignature:G,imageWithPreview:eo,isScenePin:H,link:Y,maxCloseupImageWidth:q&&et||Q,originalImageUrl:$,showProductDetailPage:ee}}},71157:function(e,t,i){i.r(t),i.d(t,{default:()=>p});var n=i(281098),a=i(20256),o=i(707915),l=i(704300),r=i(521009),s=i(525839),d=i(123317),c=i(341742),u=i(785893);let p=({clientTrackingParams:e,watchAgain:t,imageSrc:i,pinDescription:p,pinId:h,rounded:m=!0})=>{(0,n.Z)("EndCard","/app/common/react/components/closeup/StoryPin/EndCard.tsx");let g=(0,s.ZP)(),y=(0,r.Z)();(0,c.Z)(()=>{y({event_type:120,view_type:3,component:13799})});let _=()=>{t()};return(0,u.jsx)(a.xu,{alignItems:"center",bottom:!0,color:"dark","data-test-id":"story-pin-end-card",direction:"column",display:"flex",height:"100%",justifyContent:"center",left:!0,opacity:.9,padding:4,position:"absolute",right:!0,rounding:m?d.yR:0,top:!0,width:"100%",children:(0,u.jsx)(a.kC,{alignItems:"center",direction:"column",height:"100%",justifyContent:"center",width:"100%",children:(0,u.jsxs)(a.kC,{alignContent:"start",direction:"column",gap:{row:0,column:8},justifyContent:"start",children:[(0,u.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,u.jsx)(l.default,{buttonText:g._('Send', 'end.video.send.icon.label', 'Clickable label when pressed opens share sheet after video is finished'),clientTrackingParams:e,imageSrc:i,pinDescription:p,pinId:h,shownWithinMasonry:!0})}),(0,u.jsxs)(a.kC,{alignItems:"center",children:[(0,u.jsx)(o.Z,{accessibilityLabel:g._('Replay button', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page'),handleClick:_,icon:"refresh",iconColor:"white",testId:"closeup-replay-button"}),(0,u.jsx)(a.xu,{children:(0,u.jsx)(a.iP,{onTap:_,rounding:2,children:(0,u.jsx)(a.X6,{color:"light",overflow:"normal",size:"400",children:g._('Replay', 'storyPin.closeup.endCard.replay', 'Button label to navigate to previous page')})})})]})]})})})}},996434:function(e,t,i){i.d(t,{Z:()=>u});var n=i(281098),a=i(20256),o=i(592821),l=i(248762),r=i(677921),s=i(123317),d=i(123998),c=i(785893);function u({activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:i,customEndCard:u,fontsLoaded:p,horizontalOffset:h,isActive:m,isPreview:g,muteVideos:y,onEnded:_,onFlyoutOpen:f,onUpdateVideoInfo:x,ownerId:v,page:b,pageAspectRatio:w,pageHeight:P,pageIndex:I,pageWidth:C,pin:S,pinId:k,productPins:j,shouldLogTimeSpent:Z=!0,stillLoading:T=!1,verticalOffset:E,videoPinProgress:A,viewParameter:D,viewType:z}){(0,n.Z)("StoryPinPage","/app/common/react/components/closeup/StoryPin/renderer/StoryPinPage.tsx");let{nonRenderableBlocks:B,blocks:L}=(0,r.Z)({storyPinBlocks:b.blocks??[]}),M=!!L.find(e=>e.type===s.h8.VIDEO),F=!!L.find(e=>!!e.video&&e.type===s.h8.VIDEO&&e.video_signature),R=B.find(e=>e.type===s.h8.MUSIC),V=R?.type==="story_pin_music_block"?R.provider_recording_id:void 0,W=()=>(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{background:o.yc}},height:"100%",children:!g&&L.filter(e=>!M||F||e.type===s.h8.VIDEO).map((t,n)=>{let a=(j||[]).find(e=>[e.id,e.cacheable_id].includes(t.pin_id));return(0,c.jsx)(l.Z,{activePageIndex:e,block:t,closeupStoryPinViewability:i,customEndCard:u,disableProductStickers:!0,fontsLoaded:p,horizontalOffset:h,isActive:m,isSplitLayout:3===b.layout,musicRecordingId:V,muteVideos:y,onEnded:_,onFlyoutOpen:f,onUpdateVideoInfo:x,ownerId:v,pageAspectRatio:w,pageHeight:P,pageIndex:I,pageWidth:C,pin:S,pinId:k,pinKey:null!=a?{type:"deprecated",data:a}:null,stillLoading:T,verticalOffset:E,videoPinProgress:A},`${b.id??""}-${t.type??""}-${n}`)})});return Z?(0,c.jsx)(d.Z,{auxData:{story_pin_page_id:I},clientTrackingParams:t,component:0===I?227:228,shouldUseGrandparentId:!0,view:z,viewParameter:D,children:W()}):W()}},677921:function(e,t,i){i.d(t,{Z:()=>o});var n=i(123317);let a=[n.h8.COMMENT_REPLY_STICKER,n.h8.GENERIC_STICKER,n.h8.HEADING,n.h8.IMAGE,n.h8.MENTION_STICKER,n.h8.PARAGRAPH,n.h8.PRODUCT_STICKER,n.h8.VIDEO,n.h8.VTO_MAKEUP_STICKER];function o({storyPinBlocks:e=[],blocksToRender:t=a}){let i=[],o=[],l=[];return e.forEach(e=>{t.includes(e.type)?e.type===n.h8.PARAGRAPH||e.type===n.h8.HEADING?o.push(e):l.push(e):i.push(e)}),l.push(...o),{nonRenderableBlocks:i,textBlocks:o,blocks:l}}},573647:function(e,t,i){i.d(t,{Z:()=>l});var n=i(934645),a=i(611499),o=i(601686);function l({showProductDetailPage:e=!1,mainImage:t,skipAspectRatioCheck:i=!1}={}){let{viewportSize:r}=(0,o.x4)();if(!(0,n.Z)({showProductDetailPage:e}))return{maxHeight:void 0};if(!i&&t){let{height:e=0,width:i=0}=t;if(i/e<.25)return{maxHeight:void 0}}return{maxHeight:"sm"===r?a.E$:a.Id}}},102134:function(e,t,i){i.d(t,{Z:()=>l});var n=i(274320),a=i(15667),o=i(647709);let l=()=>{let{isAuthenticated:e}=(0,a.B)(),t=(0,o.HG)(),{checkExperiment:i}=(0,n.r)();return()=>e&&t&&i("auth_dweb_shuffle_renderer_closeup_v2").anyEnabled}},629178:function(e,t,i){i.d(t,{Z:()=>s});var n=i(667294),a=i(825332),o=i(15667),l=i(647709),r=i(688170);let s=({isShufflePin:e})=>{let{isAuthenticated:t}=(0,o.B)(),i=(0,l.HG)(),s=(0,r.C)((0,a.TH)());return(0,n.useMemo)(()=>({isCloseupMediaViewerEnabled:t&&i&&s&&!e}),[t,i,s,e])}},73579:function(e,t,i){i.d(t,{Z:()=>n});let n=e=>({isEligibleForStaticImageIdeaPin:!!e})},704300:function(e,t,i){i.r(t),i.d(t,{default:()=>d});var n=i(281098),a=i(667294),o=i(825332),l=i(11919),r=i(378888),s=i(785893);function d({buttonText:e,clientTrackingParams:t,imageSrc:i,pinDescription:d,pinId:c,shownWithinMasonry:u}){(0,n.Z)("IdeaPinSecondarySendButton","/app/common/react/components/social/IdeaPinSecondarySendButton.tsx");let p=(0,o.TH)(),[h,m]=(0,a.useState)(!!(0,r.mB)(p.search).share);return(0,s.jsx)(l.default,{buttonText:e,controllerOptions:{flyoutDisplayOptions:{showCaret:!0,shownWithinMasonry:u},isFlyoutOpen:h,loggingOptions:{component:228,element:10942,viewParameter:157,viewType:3},onFlyoutDismiss:()=>m(!1),onToggleFlyout:()=>m(!h),sendObject:{type:"pin",description:d,id:c,imageUrl:i,url:`/pin/${c}/`,clientTrackingParams:t}},iconColor:"white"})}},294851:function(e,t,i){i.d(t,{Z:()=>_});var n,a=i(281098),o=i(667294);i(422578);var l=i(890479),r=i(869985),s=i(415546),d=i(776777),c=i(863667),u=i(750092),p=i(104659),h=i(785893);function m(e,t,i){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let g=(void 0!==n||(n=i(3449)).hash&&"60493becbbe037be854a8cd1136fede6"!==n.hash&&console.error("The definition of 'CloseupVideoWithVisibility_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class y extends o.Component{constructor(...e){super(...e),m(this,"handleVisibilityChanged",e=>{let{pinId:t,isPromoted:i,setCurrentVideo:n,pauseAutoplay:a,videosAutoplaying:o,videoStartTime:l}=this.props,r=(0,u.Z)(t,o);e&&!r?n({pinId:t,isPromoted:!!i,currentTime:l}):!e&&r&&a({pinId:t,isPromoted:!!i,currentTime:this.currentVideoCurrentTime})}),m(this,"handleVideoTimeChange",e=>{let{pinId:t,videosAutoplaying:i}=this.props;(0,u.Z)(t,i)&&(this.currentVideoCurrentTime=e.time)})}componentDidUpdate(e){let{appInFocus:t}=e,{appInFocus:i,pauseAutoplay:n,pinId:a,isPromoted:o,setCurrentVideo:l,videosAutoplaying:r}=this.props,s=(0,u.Z)(a,r),d=(0,c.Z)(a,r);this.currentVideoCurrentTime=d??this.currentVideoCurrentTime,i!==t&&!i&&s?(this.pausedDueToBrowserOutOfFocus=!0,n({pinId:a,isPromoted:!!o,currentTime:this.currentVideoCurrentTime})):this.pausedDueToBrowserOutOfFocus&&i&&(this.pausedDueToBrowserOutOfFocus=!1,l({pinId:a,isPromoted:!!o,currentTime:this.currentVideoCurrentTime}))}componentWillUnmount(){let{pinId:e,isPromoted:t,pauseAutoplay:i}=this.props;i({pinId:e,isPromoted:!!t,currentTime:this.currentVideoCurrentTime})}render(){let{pauseAutoplay:e,pin:t,setCurrentVideo:i,videoStartTime:n,videosAutoplaying:a,...o}=this.props;return(0,h.jsx)(l.Z,{id:"VisibilityChangedWrapper",children:(0,h.jsx)(d.Z,{onVisibilityChanged:this.handleVisibilityChanged,trackFullVisible:!1,...o,children:(0,h.jsx)(l.Z,{id:"CloseupVideo",children:(0,h.jsx)(r.Z,{...o,onTimeChange:this.handleVideoTimeChange,pinKey:t})})})})}}function _(e){(0,a.Z)("CloseupVideoWithVisibility","/app/common/react/components/video/closeup/CloseupVideoWithVisibility.tsx");let{pinId:t,pinKey:i,isPromoted:n}=e,o=(0,s.Z)(g,i),{appUI:{appInFocus:r,videosAutoplaying:d},pauseAutoplay:c,setCurrentVideo:u}=(0,p.G)(),{organicVideosAutoplaying:m,promotedVideosAutoplaying:_}=d,f=n?_[t]:m[t];return(0,h.jsx)(l.Z,{id:"CloseupVideoWithVisibilityInner",children:(0,h.jsx)(y,{...e,appInFocus:r,pauseAutoplay:c,pin:o,setCurrentVideo:u,videosAutoplaying:d,videoStartTime:f?f.currentTime:null})})}},673616:function(e,t,i){function n({isHiddenPin:e,isUnsafePin:t}){return!e&&!t}i.d(t,{Z:()=>n})},27152:function(e,t,i){async function n(e){return new Promise((t,i)=>{let n=document.createElement("img");n.onerror=()=>i(Error(`Image failed to load with src ${e}`)),n.onload=()=>t(!0),n.src=e})}async function a(e){try{let t=await fetch(e,{method:"HEAD"}),i=(await t.blob()).type.startsWith("image/");{let t=await n(e);return i&&t}}catch(e){return!1}}i.d(t,{Z:()=>a})},411354:function(e,t,i){i.d(t,{Z:()=>r});var n=i(603316);let a=e=>{let t=new Image;t.loading="lazy",t.src=e;let{complete:i}=t;return t.src="",i},o=["736x","564x","474x","236x"],l=new RegExp(/\/(\d+x|originals)\//);function r(e){for(let t of o){let i=e.replace(l,`/${t}/`);if(a(i))return(0,n.nP)("web.closeup.cached_preview_image.found",{tags:{resolution:t}}),i}return(0,n.nP)("web.closeup.cached_preview_image.not_found"),null}},640785:function(e,t,i){i.d(t,{NC:()=>o,Rc:()=>r,WK:()=>d,X9:()=>a,b9:()=>n,f9:()=>s,gu:()=>l});let n="pin-builder-font-faces",a="system-font-faces",o="pin-builder-education-font-faces",l="licensed",r="system",s="brand",d=4},389965:function(e,t,i){i.d(t,{Z:()=>eP});var n=i(281098),a=i(667294),o=i(825332),l=i(20256),r=i(96413),s=i(592821),d=i(996434),c=i(581722),u=i(525839),p=i(611282),h=i(776777),m=i(169053),g=i(785893);let y=e=>{let t=(0,u.ZP)(),{sourceUrl:i,clientTrackingParams:n,linkText:a,displayUrl:o,image:r,pageId:s,canonicalUrl:d,pinId:h,onTouch:y,onClickThrough:_,isLoading:f}=e,x={story_pin_page_id:s,story_pin_data_id:(0,c.v9)(t=>e.pinId&&t.pins?.[e.pinId]?.story_pin_data_id),src_url:i,canonical_url:d},v=(0,g.jsxs)(l.xu,{alignItems:"center",borderStyle:"sm",display:"flex",overflow:"hidden",rounding:2,children:[(0,g.jsx)(l.xu,{alignItems:"center",color:f||r&&r.url?void 0:"secondary",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid lightGray"}},display:"flex",flex:"none",height:80,justifyContent:"center",minWidth:80,width:80,children:f?(0,g.jsx)(l.xH,{accessibilityLabel:t._('Loading website', 'a11y for loading spinner', 'a11y for loading spinner'),show:!0}):r&&r.url?(0,g.jsx)(l.Ee,{alt:a,fit:"cover",naturalHeight:r.height??1,naturalWidth:r.width??1,src:r.url}):(0,g.jsx)(l.JO,{accessibilityLabel:t._('Default link block icon', 'Icon for default link blocks without an image', 'Icon for default link blocks without an image'),color:"subtle",icon:"link",size:35})}),(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},flex:"grow",overflow:"hidden",paddingX:5,children:[(0,g.jsx)(l.xv,{lineClamp:1,weight:"bold",children:a}),(0,g.jsx)(l.xv,{color:"shopping",size:"200",children:o})]})]}),b=(0,m.S6)()(h),w=(0,p.Z)({href:{pathname:i,state:{trackingParams:n}},target:"blank",clientTrackingParams:n,externalData:b?{pin:b&&{attributionSourceId:b.attribution_source_id,board:b.board&&{url:b.board.url},campaignId:b.campaign_id,entityId:b.id,isDownstreamPromotion:b.is_downstream_promotion,isPromoted:b.is_promoted,pinner:b.pinner&&{username:b.pinner.username},pinPromotionId:b.pin_promotion_id,promoter:b.promoter&&{entityId:b.promoter.id},storyPinDataId:b.story_pin_data_id,trackingParams:b.tracking_params,advertiserId:b.advertiser_id}}:void 0});return y?(0,g.jsx)(l.iP,{onTap:y,rounding:2,children:v}):(0,g.jsx)(l.Tg,{href:i,onTap:({event:e,dangerouslyDisableOnNavigation:t})=>{t(),_&&_({auxData:x}),w({event:e})},rel:"nofollow",rounding:2,target:"blank",children:v})},_=e=>((0,n.Z)("StoryPinLinkModule","/app/common/react/components/closeup/StoryPin/StoryPinLinkModule.tsx"),(0,g.jsx)(h.Z,{...e,children:(0,g.jsx)(y,{...e})}));var f=i(980787),x=i(123317);let v=(0,i(78762).Z)(()=>i.e("15564").then(i.bind(i,125734)),void 0,e=>125734,"app-common-react-components-Activities-Utils-Linkify",e=>["15564"]),b=({block:e,clientTrackingParams:t,pageId:i,pinId:a,onClickThrough:o})=>{(0,n.Z)("StoryPinBlock","/app/common/react/components/closeup/StoryPin/StoryPinBlock.tsx");let{logContextEvent:r}=(0,f.u)();switch(e.type){case x.h8.LINK:let{canonical_url:s,image:d,normalized_url:c,src_url:u,text:p=""}=e,h=d?.images?.["345x"];if(d&&u&&c&&s)return(0,g.jsx)(l.xu,{marginTop:5,children:(0,g.jsx)(_,{canonicalUrl:s,clientTrackingParams:t,displayUrl:c,image:h,linkText:p,onClickThrough:o,onVisibilityChanged:e=>{e&&r({event_type:120,view_type:3,view_parameter:157,component:228,element:11157,object_id_str:a,aux_data:{story_pin_page_id:i,srcUrl:u,canonicalUrl:s}})},pageId:i,pinId:a,sourceUrl:u})});return null;case x.h8.HEADING:{let{text:t=""}=e;return(0,g.jsx)(l.xu,{marginBottom:4,paddingX:2,children:(0,g.jsx)(l.X6,{accessibilityLevel:2,overflow:"normal",size:"600",children:t})})}case x.h8.PARAGRAPH:{let{text:t=""}=e;return(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},paddingX:2,children:(0,g.jsx)(l.xv,{children:(0,g.jsxs)(v,{children:[" ",t," "]})})})}default:return null}};var w=i(369416);let P=`
@media (min-height: 0) {
  .StoryPinText {
    padding: 15px;
  }
  .StoryPinText span {
    font-size: 12px;
  }
  .StoryPinText h2 {
    font-size: 18px;
  }
}

@media (min-height: 600px) {
  .StoryPinText {
    padding: 2.5vh;
  }
  .StoryPinText span {
    font-size: 2vh;
  }
  .StoryPinText h2 {
    font-size: 3vh;
  }
}

@media (min-height: 800px) {
  .StoryPinText {
    padding: 20px;
  }
  .StoryPinText span {
    font-size: 16px;
  }
  .StoryPinText h2 {
    font-size: 24px;
  }
}
`,I=e=>{(0,n.Z)("StoryPinText","/app/common/react/components/closeup/StoryPin/StoryPinText.tsx");let{blocks:t,clientTrackingParams:i,pageId:o,pinId:l,onClickThrough:r}=e;return(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(w.Z,{unsafeCSS:P}),(0,g.jsx)("div",{className:"StoryPinText",children:t.filter(e=>e).map((e,t)=>(0,g.jsx)(b,{block:e,clientTrackingParams:i,onClickThrough:r,pageId:o,pinId:l},t))})]})};var C=i(179639);let S=s._B*x.ap,k=`
.StoryPinTextDrawer {
  background: #fff;
  border-top-left-radius: 32px;
  border-top-right-radius: 32px;
  bottom: 0;
  box-shadow: rgba(0, 0, 0, 0.1) 0 1px 20px 0;
  box-sizing: border-box;

  height: auto;
  max-height: 15%;
  opacity: 0.625;
  position: absolute;
  transition: max-height 0.15s ease-in, opacity 0.15s ease-in;
  width: 100%;
}

.StoryPinTextDrawer:hover {
  max-height: 70%;
  opacity: 1;
  overflow: scroll;
}
`;function j(e){(0,n.Z)("StoryPinMediaLayout","/app/common/react/components/closeup/StoryPin/StoryPinMediaLayout.tsx");let t=(0,u.ZP)(),{activePageIndex:i,clientTrackingParams:o,hideText:r,isActive:d,isCoverPage:c,muteVideos:p,onClickThrough:h,page:{image_adjusted:m,image:y,blocks:_,video:f,id:x},pageIndex:v,pageWidth:b,pin:P,pinId:j}=e,{images:Z={}}=m||y||{},T=Z["750x"],{video_list:E={}}=f||{},A=E.V_HLSV3_MOBILE||E.V_720P;if(!T&&!A)return null;let D=b/s._B;return(0,g.jsxs)(a.Fragment,{children:[!!f&&!!A&&(0,g.jsx)(C.Z,{activePageIndex:i,blockHeight:S*D,blockWidth:s._B*D,isPlaying:d,muted:p,pageIndex:v,pin:P,pinId:j,video:f}),T&&T.url&&!A&&(0,g.jsx)(l.Ee,{alt:function(e){let t="";for(let i of e.blocks??[])[1,0].includes(i.block_type)&&(t=i.text?i.text:"");return t??""}(e.page)||t._('Story pin image', 'Alt text for story pin image', 'Alt text for story pin image'),fit:c?"cover":"contain",naturalHeight:T.height??1,naturalWidth:T.width??1,src:T.url}),_&&_.length>0&&!r&&(0,g.jsxs)(a.Fragment,{children:[(0,g.jsx)(w.Z,{unsafeCSS:k}),(0,g.jsx)("div",{className:"StoryPinTextDrawer",children:(0,g.jsx)(I,{blocks:_,clientTrackingParams:o,onClickThrough:h,pageId:x,pinId:j})})]})]})}let Z=e=>{(0,n.Z)("StoryPinSplitLayout","/app/common/react/components/closeup/StoryPin/StoryPinSplitLayout.tsx");let{page:{image_adjusted:t,blocks:i}}=e,{images:o={}}=t||{},r=o["750x"];if(!r)return null;let{width:s,height:d}=r;return(0,g.jsx)(a.Fragment,{children:r&&r.url&&(0,g.jsx)(l.Ee,{alt:(i??[]).map(e=>e.text||"").join(),fit:"contain",naturalHeight:d??1,naturalWidth:s??1,src:r.url})})};var T=i(607600),E=i(390843),A=i(886981),D=i(885003),z=i(123998),B=i(611499),L=i(230543);function M({children:e,clientTrackingParams:t,closeupStoryPinViewability:i,pin:n,productPins:a,viewParameter:o,viewType:l}){let{previous:r,forward:s}=(0,E.ou)(),c=0===r.length&&0===s.length,u=(0,L.t)();return(0,g.jsx)(D.o,{closeupPaneWidth:B.Gg,headerHeight:u,isLandingPage:c,loadFonts:T.Z,productPins:a,renderStoryPinMediaLayout:({activePageIndex:e,hideText:i,isActive:a,isCoverPage:o,muteVideos:l,onClickThrough:r,page:s,pageIndex:d,pageWidth:c,pinId:u})=>(0,g.jsx)(j,{activePageIndex:e,clientTrackingParams:t,hideText:i,isActive:a,isCoverPage:o,muteVideos:l,onClickThrough:r,page:s,pageIndex:d,pageWidth:c,pin:n,pinId:u}),renderStoryPinPage:({activePageIndex:e,customEndCard:a,fontsLoaded:r,isActive:s,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:h,page:m,pageAspectRatio:y,pageHeight:_,pageWidth:f,ownerId:x,pinId:v,productPins:b,shouldLogTimeSpent:w,stillLoading:P,videoPinProgress:I})=>(0,g.jsx)(d.Z,{activePageIndex:e,clientTrackingParams:t,closeupStoryPinViewability:i,customEndCard:a,fontsLoaded:r,isActive:s,muteVideos:c,onEnded:u,onFlyoutOpen:p,onUpdateVideoInfo:h,ownerId:x,page:m,pageAspectRatio:y,pageHeight:_,pageIndex:e,pageWidth:f,pin:n,pinId:v,productPins:b,shouldLogTimeSpent:w,stillLoading:P,videoPinProgress:I,viewParameter:o,viewType:l}),renderStoryPinSplitLayout:({page:e})=>(0,g.jsx)(Z,{page:e}),renderStoryPinText:({blocks:e,onClickThrough:i,pageId:n,pinId:a})=>(0,g.jsx)(I,{blocks:e,clientTrackingParams:t,onClickThrough:i,pageId:n,pinId:a}),children:e})}function F({clientTrackingParams:e,children:t,isInStream:i,viewType:n,viewParameter:a}){return i?t:(0,g.jsx)(z.Z,{clientTrackingParams:e,component:85,view:n,viewParameter:a,children:t})}function R({children:e,pin:t}){return e({productPins:(0,A.Z)({name:"StoryPinTaggedProductsResource",options:{id:t.id},noCache:!0}).data||[]})}function V({children:e,clientTrackingParams:t,closeupStoryPinViewability:i,pin:a,isInStream:o=!1,viewType:l,viewParameter:r}){(0,n.Z)("DesktopStoryPinContextProvider","/app/common/react/components/closeup/StoryPin/DesktopStoryPinContextProvider.tsx");let s=!!a.story_pin_data?.has_product_pins,d=({productPins:n})=>(0,g.jsx)(M,{clientTrackingParams:t,closeupStoryPinViewability:i,pin:a,productPins:n,viewParameter:r,viewType:l,children:e});return(0,g.jsx)(F,{clientTrackingParams:t,isInStream:o,viewParameter:r,viewType:l,children:s?(0,g.jsx)(R,{pin:a,children:d}):d({productPins:[]})})}var W=i(521009),O=i(642407),K=i(355940),H=i(19585),N=i(115247),$=i(453179),G=i(728994),U=i(776250),X=i(67831),Y=i(716920),J=i(956077),q=i(821806),Q=i(15667),ee=i(572227);function et({appConfig:e}){(0,n.Z)("IdeaPinActions","/app/packages/story-pin/Closeup/IdeaPinActions.tsx");let t=(0,H.Z)(),i=(0,ee.Z)(),{isRTL:o}=(0,Q.B)();return(0,g.jsx)(a.Fragment,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{marginTop:16}},"data-test-id":"back-button",left:!o,paddingX:4,position:"absolute",right:o,top:!0,children:"authDesktop"===e.type&&(0,g.jsx)(l.hU,{accessibilityLabel:t._('Back button', 'storyPin.closeup.back', 'Button label to navigate to previous page'),bgColor:"transparent",icon:"directional-arrow-left",iconColor:"darkGray",onClick:()=>{i({action:"click",item:"back-button"}),e.onNavigateBack()},size:"lg"})})})}var ei=i(281106),en=i(461413),ea=i(181663),eo=i(445698),el=i(724084),er=i(543561),es=i(341742),ed=i(239728),ec=i(601686),eu=i(458460),ep=i(620427);let eh=(0,a.lazy)(()=>i.e("65443").then(i.bind(i,850447))),em=(0,a.lazy)(()=>Promise.resolve().then(i.bind(i,71157))),eg=(0,a.lazy)(()=>i.e("32560").then(i.bind(i,817631))),ey=(0,a.lazy)(()=>Promise.all([i.e("25418"),i.e("96415")]).then(i.bind(i,377733))),e_=(0,a.lazy)(()=>Promise.resolve().then(i.bind(i,704300))),ef={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"32px 32px 0 0"},ex={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",borderRadius:"0 0 32px 32px",bottom:0},ev={backgroundImage:"linear-gradient(to bottom, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",borderRadius:"32px 32px 0 0",paddingTop:"30px",top:0},eb=[5,6,2];function ew({appConfig:e,clientTrackingParams:t,isInFocus:i,isInStream:n=!1,isStreamMuted:o,isStreamPanelOpen:d=!0,pin:c,storyPinData:u,onIdeaPinCloseupCommentClick:p,setStreamIsMuted:h,streamItemIndex:m,togglePanel:y,variant:_,viewType:f=3,viewParameterType:v,onTogglePanel:b}){let w,P=(0,D.c)(),{peekCloseupEnabled:I,viewportSize:C}=(0,ec.x4)(),S=(0,H.Z)(),k=(0,W.Z)(),j=(0,Y.g)(),Z=(0,X.A)(),{setIdeaPinActivePage:T,setIdeaPinDynamicWidth:E}=(0,eu.Ut)(),{activePage:A}=(0,eu.H8)(),{clearSeekTime:z}=(0,el.RC)(),{seekTimes:B}=(0,el.Hx)(),{closeupPaneWidth:L,headerHeight:M,isLandingPage:F,renderStoryPinMediaLayout:R,renderStoryPinPage:V,renderStoryPinSplitLayout:N,renderStoryPinText:Q,productPins:ee}=P||{},{id:ep}=c,ew=B&&B[c.id],eP=!!u?.is_deleted,{pages:eI=[],metadata:eC={}}=u||{},{canvas_aspect_ratio:eS,version:ek}=eC,ej=eS??x.ap,[eZ,eT]=(0,a.useState)(0),eE=(0,a.useRef)(0),eA=(0,a.useRef)(null),[eD,ez]=(0,a.useState)("closeup"===_&&i),[eB,eL]=(0,a.useState)(375),eM="calc(100% - 32px)",eF=(0,a.useRef)(null),[eR,eV]=(0,a.useState)(!1),[eW,eO]=(0,a.useState)(!1),[eK,eH]=(0,a.useState)(!0);(0,a.useEffect)(()=>{b&&b(eK)},[eK,b]),(0,a.useEffect)(()=>{eH(d)},[d]);let{should_mute:eN=!0,music_attributions:e$=[]}=eI[eZ],[eG,eU]=(0,a.useState)(F||eN),eX=void 0!==h?h:eU,eY=void 0!==o?o:eG;(0,a.useEffect)(()=>{eN&&eX(!0)},[eN,eX]);let eJ=eI.filter(e=>!eb.includes(e.layout)),eq=eJ.length,eQ=eJ[eZ],e0=v||(0,U.Z)({hasPin:!!c,hasPinRichMetadata:!!c.rich_metadata,hasPinRichMetadataProducts:!!c.rich_metadata?.products,hasPinRichMetadataArticle:!!c.rich_metadata?.article,hasPinRichMetadataRecipe:!!c.rich_metadata?.recipe,hasPinStoryPinData:!!c.story_pin_data}),e1=M+64,{getNormalizedPinImage:e2}=(0,G.Z)({pinKey:{type:"deprecated",data:c},maxWidth:O.Wm}),e6="closeup"===_,e8=()=>{if("undefined"!=typeof window){let e=window.innerWidth-(eK?L:0)-216;if(e6)eL(function({availableWidth:e,pageAspectRatio:t,unavailableHeight:i,windowInnerHeight:n}){let a=n-i,o=Math.min(Math.max(650,Math.min((n-i)*t,e)),1e3);return o/t>=a&&(o=a*t),o}({availableWidth:e,pageAspectRatio:ej,unavailableHeight:e1,windowInnerHeight:window.innerHeight}));else{let{width:e}=e2();eL(e),E(e)}}};(0,es.Z)(()=>(window.addEventListener("resize",e8),e8(),()=>{window.removeEventListener("resize",e8)}));let[e3,e4]=(0,a.useState)(!1),[e7,e9]=(0,a.useState)(null),[e5,te]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!e5&&i&&(k({event_type:7588,view_type:f,view_parameter:e0,component:13801,object_id_str:ep,aux_data:{..."number"==typeof m?{grid_index:m}:{}}}),te(!0))},[e5,i,k,ep,f,e0,m]);let tt=(0,a.useCallback)(e=>{let{blocks:t}=eI[e]||{},n=t?.find(e=>3===e.block_type);eF.current&&eF.current instanceof er.B7&&(eF.current.clear(),eF.current=null),!n&&i&&(eF.current=new er.B7(e=>{e9({currentTime:e<1?e:1,duration:1})},()=>{let t="closeup"===_?e:A;t<eq-1?(eF.current&&eF.current instanceof er.B7&&(eF.current.clear(),eF.current=null),ta(t+1)):(eV(!0),ez(!1))},$.oN))},[i,eq,eI,A,_]),ti=e=>{e9({currentTime:0,duration:1}),tt(e)};(0,a.useEffect)(()=>{eE.current=eZ},[eZ]),(0,a.useEffect)(()=>{eA.current=eD},[eD]),(0,es.Z)(()=>(ti(eZ),()=>{eF.current&&eF.current instanceof er.B7&&eA.current&&eF.current.clear()}));let tn=e=>{Z&&(Z.abort("startNewPwt"),(0,J.sX)("startStoryPinStepPwt")),j&&(j.abort("startNewPwt"),j.start(),j.addBinaryAnnotation("page.current.index",e,"I16"),j.addBinaryAnnotation("page.count",eI.length,"I16"),j.addBinaryAnnotation("view.type",f,"I32"),j.addBinaryAnnotation("view.parameter",e0,"I32"))};(0,es.Z)(()=>{Z&&(Z.addBinaryAnnotation("page.current.index",eZ,"I16"),Z.addBinaryAnnotation("page.count",eI.length,"I16"),Z.addBinaryAnnotation("view.type",f,"I32"),Z.addBinaryAnnotation("view.parameter",e0,"I32")),(0,J.rt)("page.current.index",eZ,"I16"),(0,J.rt)("page.count",eI.length,"I16"),(0,J.rt)("view.type",f,"I32"),(0,J.rt)("view.parameter",e0,"I32")});let ta=e=>{eD||ez(!0),eR&&eV(!1),ti(e),e!==eZ&&z(),eT(e),T(e),tn(e)};(0,a.useEffect)(()=>{if(eR&&eV(!1),eF.current&&ew){let e=eF.current;e.pause(),e.remaining=$.oN-ew*ed.gJ,e9({currentTime:ew/$.P6,duration:1})}},[ew]),(0,a.useEffect)(()=>{T(A)},[T,A]),(0,a.useEffect)(()=>{"related-products"===_&&(eT(A),ta(A))},[A,_]);let to=()=>eR?13799:0===eZ?227:228,tl=()=>{eZ<eq-1&&(ta(eZ+1),k({event_type:101,view_type:f,view_parameter:e0,component:to(),element:12261,object_id_str:ep}))},tr=e=>{let{keyCode:t,target:i}=e,n=!!i&&"isContentEditable"in i&&i.isContentEditable||!!i&&"contentEditable"in i&&"true"===i.contentEditable;37!==t||n?39!==t||n||tl():eZ===eq-1&&eR?(ta(eZ),k({event_type:101,view_type:f,view_parameter:e0,component:to(),element:12260,object_id_str:ep})):eZ>0&&(ta(eZ-1),k({event_type:101,view_type:f,view_parameter:e0,component:to(),element:12260,object_id_str:ep}))};(0,a.useEffect)(()=>(document.addEventListener("keydown",tr),()=>document.removeEventListener("keydown",tr)),[eZ]);let{fontsLoaded:ts,mediaDataReceived:td}=(0,eo.tq)({hasPin:!!c,pages:eI}),tc=ek?(0,er.n4)(ek,"0.8.0"):null,tu=null!=tc&&tc>=0,tp=e=>{e===eq-1&&(eV(!0),ez(!1),T(0)),e===eZ&&tl()},th=e=>{e9({currentTime:e?.currentTime??0,duration:e?.duration??1})},tm=()=>{eO(!0),ez(!1),eF.current&&!eF.current.paused&&eF.current.pause()},tg=t=>eI[t]?tu?V({activePageIndex:eZ,fontsLoaded:ts,customEndCard:!0,isActive:t===eZ&&eD,muteVideos:eY,onChangeMuteVideo:eX,onEnded:tp,onFlyoutOpen:tm,videoPinProgress:eZ===t?e7:void 0,onUpdateVideoInfo:th,ownerId:c.native_creator?.id??"",page:eI[t],pageAspectRatio:ej,pageIndex:t,pageHeight:eB/ej,pageWidth:eB,pinId:c.id,productPins:ee,shouldLogTimeSpent:i,stillLoading:!td}):(t=>{let i=0===t.layout;switch(t.layout){case 0:case 1:return R({activePageIndex:eZ,hideText:i,isActive:!0,isCoverPage:i,muteVideos:eY,onClickThrough:e.onClickThrough,page:t,pageIndex:eZ,pageWidth:eB,pinId:ep});case 4:return t.blocks.length>0&&Q({blocks:t.blocks,pageId:`text-${eZ}`,page:t,pinId:ep,onClickThrough:e.onClickThrough});case 3:return N({page:t});default:return null}})(eQ):null,ty=()=>{ez(!1),eF.current&&eF.current.pause(),k({event_type:9324,view_type:f,view_parameter:e0,component:to(),object_id_str:ep,aux_data:{story_pin_page_id:eZ}})},t_=()=>{if(ez(!0),eF.current){let e=eF.current;ew&&ew>0&&z(),e.resume()}else e7||ti(eZ);k({event_type:9323,view_type:f,view_parameter:e0,component:to(),object_id_str:ep,aux_data:{story_pin_page_id:eZ}})},tf=()=>{eR||(eO(!1),eD?ty():t_())};(0,a.useEffect)(()=>{"closeup"===_&&(!i||eR||eD?!i&&eD&&ty():t_())},[i,_]),(0,a.useEffect)(()=>{"related-products"===_&&ty()},[]);let tx=()=>{ta(0)},{fiftyPercentWidth:tv,fiftyPercentHeight:tb}=(0,s.Re)(64),{maxHeight:tw}=(0,s.Re)(0,32),{fiftyPercentWidth:tP}=(0,s.Re)();return I&&(w="sm"===C?tb:tw),(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:e6?{top:M,height:`calc(100vh - ${M}px)`,position:"sticky",pointerEvents:"none",minHeight:632,maxHeight:I?w:void 0,zIndex:eK?"auto":3}:{}},display:"flex",left:!0,children:[(0,g.jsxs)(l.xu,{alignItems:"center",color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"auto",minWidth:I&&"sm"!==C?tP:void 0}},display:"flex",flex:"grow",justifyContent:"center",position:"relative",children:[e6&&(0,g.jsx)(l.xu,{bottom:!0,color:"secondary",left:!0,position:"absolute",right:!0,top:!0}),eP?(0,g.jsx)(en.Z,{height:eB/x.ap,rounding:x.yR,width:eB}):(0,g.jsxs)(a.Fragment,{children:[td&&(0,g.jsx)(l.xu,{height:1,left:!0,marginTop:-1,overflow:"hidden",position:"absolute",top:!0,width:1,children:(()=>{let e=[];for(let t=1;t<=eI.length;t+=1)eZ+t<eI.length&&e.push(tg(eZ+t));return e})()}),(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{marginLeft:e6?void 0:`${x.YL}px`}},display:"flex",onMouseLeave:()=>{e4(!1)},onMouseOver:()=>e4(!0),position:"relative",children:(0,g.jsxs)(l.xu,{paddingX:4,children:[(0,g.jsx)(l.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{...ex,flexDirection:"column-reverse"}},display:"flex",height:128,paddingX:6,position:"absolute",width:eM,zIndex:x.Gf,children:(0,g.jsx)(ea.Z,{activePageIndex:eZ,handleMute:()=>{eN||eX(!eY)},handlePanelChange:()=>{eH(!eK)},handlePause:ty,handlePausePlay:tf,handlePlay:t_,handleVideoScrubbingNewPage:e=>{eR&&eV(!1),ti(e),eT(e),T(e),tn(e)},handleWatchAgain:tx,inMilliseconds:!0,isMuted:eY,isPanelOpen:eK,isPlaying:eD,onPageSelect:e=>ta(e),pageCount:eq,pages:eJ,pinId:c.id,progressInfo:e7,showEndCard:eR,showVideoControls:e3,viewParameter:e0})}),(0,g.jsx)(l.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{...!eK?{paddingLeft:"26px",bottom:0}:ev,marginBottom:eK?void 0:"88px",maxWidth:tv}},"data-test-id":"music-attribution",display:"flex",justifyContent:eK?"center":"start",overflow:"hidden",paddingY:eK?5:void 0,position:"absolute",width:eB,zIndex:x.Gf,children:(0,g.jsx)(r.Z,{handlePause:ty,handlePlay:t_,musicAttributions:e$,shouldMute:eN,showEndCard:eR})}),!eR&&!eK&&(0,g.jsxs)(l.xu,{alignItems:"start",dangerouslySetInlineStyle:{__style:eK?{}:ef},display:"flex",height:128,justifyContent:"between",padding:4,position:"absolute",top:!0,width:eM,zIndex:x.Gf,children:[(0,g.jsxs)(l.kC,{alignItems:"stretch",direction:"row",children:[!eK&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_IdeaPinSecondarySendButton",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(e_,{imageSrc:c.image_url??"",pinDescription:c.description??"",pinId:c.id})})}),!eK&&c.is_eligible_for_aggregated_comments&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_CommentButton",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(eh,{onCommentClick:()=>{k({event_type:101,view_type:f,view_parameter:e0,component:13801,element:10944,object_id_str:c.id}),n&&y?y():eH(!0),p&&p();let e=document.getElementById(`canonical-card-${c.id}`);e&&e.scrollIntoView({behavior:"smooth",block:"end"})}})})}),!eK&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_ReactionPickerContainer",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(ey,{clientTrackingParams:t,component:13801,iconColor:"white",pinId:c.id,reactionByMe:c.reaction_by_me,showTooltip:!0,viewParameter:e0,viewType:f})})})})]}),!eK&&(0,g.jsx)(K.Z,{name:"SafeSuspense_IdeaPinCloseup_PinSaveButton",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{pointerEvents:"auto"}},"data-test-id":"pointer-events-wrapper",children:(0,g.jsx)(eg,{clientTrackingParams:t,isCloseupPin:!0,onClickCallback:()=>{k({event_type:101,view_type:f,view_parameter:e0,component:13801,element:0,object_id_str:c.id})},pinKey:{type:"deprecated",data:c},size:"lg"})})})})]}),(0,g.jsx)(l.xu,{"data-test-id":"story-pin-closeup-container",position:"relative",children:(0,g.jsx)(l.iP,{accessibilityLabel:eD?S._('Pause', 'storyPin.closeup.pauseButton.accessibilityLabel', 'Button label for pause tap area'):S._('Play', 'storyPin.closeup.playButton.accessibilityLabel', 'Button label for play tap area'),disabled:eR,onTap:tf,rounding:x.yR,children:(0,g.jsxs)(l.xu,{dangerouslySetInlineStyle:{__style:{maxWidth:tv,maxHeight:w}},"data-test-id":"story-pin-closeup-page",height:eB/ej,overflow:"hidden",position:"relative",rounding:x.yR,width:eB,children:[tg(eZ),!eR&&!eW&&!ew&&(0,g.jsx)(ei.Z,{playing:eD}),"authDesktop"===e.type&&eR&&c.native_creator&&(0,g.jsx)(K.Z,{name:"IdeaPinCloseup_EndCard",children:(0,g.jsx)(q.Z,{children:(0,g.jsx)(l.xu,{bottom:!0,left:!0,padding:4,position:"absolute",right:!0,rounding:x.yR,top:!0,zIndex:x.s5,children:(0,g.jsx)(em,{clientTrackingParams:c.trackingParams||c.tracking_params,imageSrc:c.image_url??"",pinDescription:c.description??"",pinId:c.id,watchAgain:tx})})})})]})})})]})})]}),!n&&e6&&(0,g.jsx)(et,{appConfig:e})]}),eK&&e6&&(0,g.jsx)(l.xu,{flex:"none",height:"100%",position:"relative",width:L,children:"duplo"===e.type&&e.storyPinDetails})]})}function eP(e){(0,n.Z)("IdeaPinCloseup","/app/packages/story-pin/Closeup/IdeaPinCloseup.tsx");let{pin:t,viewType:i=3,viewParameterType:r}=e,[s,d]=(0,a.useState)({isInFocus:!0,viewability:0}),{isInFocus:c,viewability:u}=s,p=r||(0,U.Z)({hasPin:!!t,hasPinRichMetadata:!!t.rich_metadata,hasPinRichMetadataProducts:!!t.rich_metadata?.products,hasPinRichMetadataArticle:!!t.rich_metadata?.article,hasPinRichMetadataRecipe:!!t.rich_metadata?.recipe,hasPinStoryPinData:!!t.story_pin_data}),h=(0,o.TH)(),m=e.clientTrackingParams||(0,ep.Z)((h?.state||{}).trackingParams,t.trackingParams||t.tracking_params);return(0,g.jsx)(Y.T,{children:(0,g.jsx)(N.Z,{onVisibilityChange:e=>{if(e&&e.length>0){let{intersectionRatio:t}=e[0];d({isInFocus:t>.5,viewability:t})}},options:{threshold:[0,.5,.8,.99,1]},children:n=>(0,g.jsx)(l.xu,{ref:n,children:(0,g.jsx)(V,{clientTrackingParams:m,closeupStoryPinViewability:u,pin:t,viewParameter:p,viewType:i,children:c?(0,g.jsx)(z.Z,{clientTrackingParams:m,component:13801,objectId:t.id,view:i,viewParameter:p,children:(0,g.jsx)(ew,{...e,isInFocus:c})}):(0,g.jsx)(ew,{...e,isInFocus:c})})})})})}},461413:function(e,t,i){i.d(t,{Z:()=>r});var n=i(281098),a=i(20256),o=i(19585),l=i(785893);function r({height:e,isDenseView:t,rounding:i,width:r,color:s}){(0,n.Z)("UnavailableIdeaPin","/app/packages/story-pin/Closeup/UnavailableIdeaPin.tsx");let d=(0,o.Z)();return(0,l.jsx)(a.xu,{alignItems:"center",color:s||"default","data-test-id":"unavailable-pin",display:"flex",height:e,justifyContent:"center",overflow:"hidden",position:"relative",rounding:i,width:r,children:(0,l.jsxs)(a.kC,{alignItems:"center",direction:"column",children:[(0,l.jsx)(a.xu,{paddingY:t?2:4,children:(0,l.jsx)(a.JO,{accessibilityLabel:d._('Pin not available', 'story-pin.Closeup.UnavailableIdeaPin.icon.accessibilityLabel', 'Accessibility label on icon'),color:"default",icon:"alert",size:20})}),(0,l.jsx)(a.xv,{weight:"bold",children:d._('Unavailable', 'story-pin.Closeup.UnavailableIdeaPin.Unavailable', 'Text on an unavailable idea Pin that has been deleted')}),!t&&(0,l.jsx)(a.xu,{paddingY:1,children:(0,l.jsx)(a.xv,{children:d._('Removed by the creator', 'story-pin.Closeup.UnavailableIdeaPin.Removed', 'Text on an unavailable idea Pin explaining it has been removed by its creator')})})]})})}},724084:function(e,t,i){i.d(t,{RC:()=>p,Hx:()=>h,Wr:()=>u}),i(281098);var n=i(667294),a=i(729434),o=i(496406),l=i(914071),r=i(785893);let s=()=>Promise.resolve().then(i.bind(i,496406)),{Provider:d,get:c}=(0,a.Z)("IdeaPinVideoPlayer");function u({children:e}){let[t,i]=(0,l.Z)(s,o.initialState),a=(0,n.useMemo)(()=>({dispatch:i,ideaPinVideoPlayerControls:t}),[i,t]);return(0,r.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,n.useMemo)(()=>({updateSeekTime:(t,i)=>{e({type:"UPDATE_SEEK_TIME",payload:{seekTime:t,pinId:i||""}})},clearSeekTime:t=>{e({type:"CLEAR_SEEK_TIME",payload:{seekTime:void 0,pinId:t||""}})}}),[e])}function h(){let{ideaPinVideoPlayerControls:e}=c();return e}},496406:function(e,t,i){i.r(t),i.d(t,{default:()=>a,initialState:()=>n});let n={seekTimes:{},currentProgressInfo:{currentTime:0,duration:0}};function a(e=n,t){switch(t.type){case"UPDATE_SEEK_TIME":return{...e,seekTimes:{...e.seekTimes,[t.payload.pinId]:t.payload.seekTime}};case"CLEAR_SEEK_TIME":return{...e,seekTimes:{}};default:return e}}},885003:function(e,t,i){i.d(t,{c:()=>s,o:()=>r});var n=i(281098),a=i(667294),o=i(785893);let l=(0,a.createContext)(null);function r({children:e,closeupPaneWidth:t,headerHeight:i,isLandingPage:r,loadFonts:s,renderStoryPinMediaLayout:d,renderStoryPinSplitLayout:c,renderStoryPinText:u,renderStoryPinPage:p,productPins:h}){(0,n.Z)("StoryPinContext","/app/packages/story-pin/StoryPinContext.tsx");let m=(0,a.useMemo)(()=>({closeupPaneWidth:t,headerHeight:i,isLandingPage:r,loadFonts:s,renderStoryPinMediaLayout:d,renderStoryPinSplitLayout:c,renderStoryPinText:u,renderStoryPinPage:p,productPins:h}),[t,i,r,s,d,c,u,p,h]);return(0,o.jsx)(l,{value:m,children:e})}let s=()=>((0,n.Z)("StoryPinContext","/app/packages/story-pin/StoryPinContext.tsx"),(0,a.useContext)(l))},123317:function(e,t,i){i.d(t,{Cc:()=>h,DL:()=>d,Gf:()=>y,LX:()=>a,Lc:()=>_,Ls:()=>m,Rf:()=>s,YL:()=>r,ap:()=>o,h8:()=>u,pE:()=>c,s5:()=>g,tQ:()=>p,yR:()=>l});var n=i(20256);let a={w:9,h:16},o=a.w/a.h,l=8,r=10,s=5e3,d=2e3;function c(e,t=1){return{x:(e??24)/5,y:(e??24)*(t-1)}}let u={COMMENT_REPLY_STICKER:"story_pin_comment_reply_block",GENERIC_STICKER:"story_pin_generic_interactive_sticker_block",HEADING:"story_pin_heading_block",IMAGE:"story_pin_image_block",INGREDIENT:"story_pin_ingredient_block",LINK:"story_pin_link_block",MENTION_STICKER:"story_pin_mention_sticker_block",MUSIC:"story_pin_music_block",PARAGRAPH:"story_pin_paragraph_block",PRODUCT_STICKER:"story_pin_product_sticker_block",SUPPLY:"story_pin_supply_block",VIDEO:"story_pin_video_block",VTO_MAKEUP_STICKER:"story_pin_virtual_try_on_makeup_sticker_block"},p=[u.IMAGE,u.VIDEO],h={alignment:1,hex_color:"#111111",highlight_color:"#FFFFFF",vertical_alignment:1,font:{default_size:28,id:"1",key:"Graphik-Regular.otf",letter_spacing:-.4,line_height:1.25,name:"Teaspoon",url:"https://s.pinimg.com/story_pins/fonts/Graphik-Regular.otf"},font_size:28},m=new n.Ry(1),g=new n.H3([m]),y=new n.H3([g]),_=e=>{let t=Math.floor(e||0),i=Math.floor(t/60),n=t-60*i,a=i<10?`${i}`:i,o=n<10?`0${n}`:n;return`${a}:${o}`}},7525:function(e,t,i){i.d(t,{Z:()=>o});var n=i(667294),a=i(27152);function o(e){let[t,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{!async function(){i(await (0,a.Z)(e))}()},[e]),t}},776777:function(e,t,i){i.d(t,{Z:()=>r});var n=i(281098),a=i(20256),o=i(331854),l=i(785893);function r({onVisibilityChanged:e,children:t,...i}){(0,n.Z)("VisibilityChangedWrapper","/app/packages/useVisibilityChanged/VisibilityChangedWrapper.tsx");let r=(0,o.Z)({onVisibilityChanged:e,...i});return(0,l.jsx)(a.xu,{ref:r,children:t})}},863667:function(e,t,i){function n(e,t){let{organicVideosAutoplaying:i,promotedVideosAutoplaying:n,videoCarouselModuleAutoplaying:a}=t,o={...i,...n,...a};return o[e]&&o[e].currentTime}i.d(t,{Z:()=>n})},458460:function(e,t,i){i.d(t,{H8:()=>h,Ut:()=>p,fr:()=>u}),i(281098);var n=i(667294),a=i(729434),o=i(914071),l=i(987765),r=i(785893);let s=()=>i.e("77027").then(i.bind(i,145581)),{Provider:d,get:c}=(0,a.Z)("IdeaPin");function u({children:e}){let[t,i]=(0,o.Z)(s,l.Z),a=(0,n.useMemo)(()=>({dispatch:i,ideaPin:t}),[i,t]);return(0,r.jsx)(d,{value:a,children:e})}function p(){let{dispatch:e}=c();return(0,n.useMemo)(()=>({setIdeaPinActivePage:t=>{e({type:"IDEA_PIN_ACTIVE_PAGE",payload:{activePage:t}})},setIdeaPinDynamicWidth:t=>{e({type:"IDEA_PIN_DYNAMIC_WIDTH",payload:{dynamicWidth:t}})}}),[e])}function h(){let{ideaPin:e}=c();return e}},987765:function(e,t,i){i.d(t,{Z:()=>n});let n={activePage:0,dynamicWidth:0}},688170:function(e,t,i){i.d(t,{C:()=>n,_:()=>a});let n=e=>!!e&&/^\/pin\/[\w-]+\/?$/.test(e.pathname),a=e=>{let t=[...e].reverse().find(({location:e})=>e&&!n(e));return t&&t.location&&(({pathname:e})=>/^\/search\/pins\//.test(e))(t.location)?(({pathname:e,search:t})=>{let i=/^\/search\/pins\/(\?.*)$/.exec(e),n=(t||i&&i[1]||"").substr(1).split("&").map(e=>e.split("=")).find(e=>"q"===e[0]);return n?decodeURIComponent(n[1]):""})(t.location):""}},298638:function(e,t,i){i.d(t,{Z:()=>u});var n=i(281098),a=i(20256),o=i(934645),l=i(15667),r=i(85574),s=i(611499),d=i(601686),c=i(785893);function u({children:e,isVideo:t=!1,isWideVideo:i,shouldPadImage:u,styleOverrides:p={},variant:h}){(0,n.Z)("ResponsiveImageContainer","/app/www/closeup/desktop/responsiveContainers/ResponsiveImageContainer.tsx");let{showCloseupContentRight:m,viewportSize:g,paneWidth:y,closeupWithinMasonryEnabled:_,peekCloseupEnabled:f,showProductDetailPage:x}=(0,d.x4)(),v=(0,l.B)(),b=(0,o.Z)({showProductDetailPage:x}),w="default"===h;if(!(!_&&(m&&"lg"===g||w||i)))return(0,c.jsx)(a.xu,{children:e});let{borderStyle:P}=(0,r.Z)({isSideBySide:m&&!i,isPadded:u,isRTL:v.isRTL,closeupWithinMasonryEnabled:_,peekCloseupEnabled:f}),I=i?s.KP:y,C=i?s.KP:496,S=p.height?.height||"100%",k=p.maxWidth?.maxWidth||I,j=p.minWidth?.minWidth||y;return(0,c.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{borderRadius:b||_?void 0:p.borderRadius||P.borderRadius,...u&&t?{overflow:"hidden"}:{}}},display:w?"flex":void 0,flex:w&&i?"grow":void 0,height:w?S:void 0,justifyContent:w?"center":void 0,marginBottom:w?void 0:6,marginEnd:w?void 0:6*!i,maxWidth:w?k:C,minWidth:w?j:344,rounding:w?void 0:2,children:e})}},44344:function(e,t,i){i.d(t,{Z:()=>c});var n=i(667294),a=i(274320),o=i(15667),l=i(647709),r=i(603316);class s{constructor(){var e,t,i;e="callbacks",t=new Map,(e="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string"))?i:i+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t,this.observer=new ResizeObserver(e=>{e.forEach(e=>{let t=this.callbacks.get(e.target);t&&t.forEach(t=>t(e.target))})})}observe(e,t){this.callbacks.has(e)||(this.callbacks.set(e,new Set),this.observer.observe(e)),this.callbacks.get(e).add(t)}unobserve(e,t){let i=this.callbacks.get(e);i&&(i.delete(t),0===i.size&&(this.callbacks.delete(e),this.observer.unobserve(e)))}}let d=null;function c(e,t){let{anyEnabled:i,group:c}=(0,a.r)().checkExperiment("closeup_web_resize_observer_optimization"),{isAuthenticated:u}=(0,o.B)(),p=(0,l.ZP)(),h=(0,n.useCallback)(t=>{let i=performance.now();e(t);let n=performance.now();(0,r.nP)("closeup.www.resizeObserverCallback",{sampleRate:.1,tags:{isAuthenticated:u,deviceType:p,resizeObserverOptimizationExp:c,duration:Math.round(n-i)}})},[e,u,p,c]);m=i?null:h,(0,n.useEffect)(()=>{if(!t.current||!m)return()=>{};{let e=t.current;if("ResizeObserver"in window){let t=new ResizeObserver(t=>{Array.isArray(t)&&t.length&&m(e)});return t.observe(e),()=>t.unobserve(e)}{let t,i=e.clientHeight,n=e.clientWidth,a=()=>{let o=e.clientHeight,l=e.clientWidth;(i!==o||n!==l)&&(i=o,n=l,m(e)),t=window.requestAnimationFrame(a)};return a(),()=>window.cancelAnimationFrame(t)}}},[t,m]);var m,g=i?h:null;let y=(0,n.useRef)(g);y.current=g;let _=(0,n.useCallback)(e=>{y.current?.(e)},[]);(0,n.useEffect)(()=>{if(!t.current)return;let e="undefined"!=typeof window&&"ResizeObserver"in window?(d||(d=new s),d):null;if(!e)return void(0,r.nP)("closeup.www.resizeObserverCallback.noResizeObserver",{sampleRate:.1,tags:{isAuthenticated:u,deviceType:p}});let i=t.current;return e.observe(i,_),()=>{e.unobserve(i,_)}},[t,_,u,p])}},238187:function(e,t,i){function n(e){let t=[],i="";for(let n of e)if(i){let e=!!n.match(/\s/),a=!!i.match(/\s/);if(e===a)i+=n;else if(!a&&i.includes("-")){let e=0;for(let n=0;n<i.length;n+=1)"-"===i[n]&&(t.push(i.substring(e,n+1)),e=n+1);t.push(i.substring(e)),i=n}else t.push(i),i=n}else i=n;return i.length&&t.push(i),t}function a({boxHeight:e,boxWidth:t,font:i,startFontSize:a,text:o}){if("undefined"==typeof document||!document.body)return{fontSize:a,lines:[]};let{body:l}=document,r=document.createElement("div");l.appendChild(r);let s=o?.split(/\r?\n/g),d=a,c={letterSpacing:i.fontOverrides?.letterSpacing!=null?`${i.fontOverrides.letterSpacing}px`:void 0,lineHeight:String(i.fontOverrides?.lineHeight||1.1),fontFamily:i.fontFamily,fontSize:`${d}px`,position:"absolute",visibility:"hidden",width:`${t}px`};Object.assign(r.style,c);let u=document.createElement("div");for(u.style.display="inline",r.appendChild(u),(s??[]).forEach((e,t)=>{let i=document.createElement("span");i.style.wordBreak="break-word",u.appendChild(i),i.appendChild(document.createTextNode(e)),t!==(o??"").length-1&&i.appendChild(document.createElement("br"))});(u.offsetHeight>e||u.offsetWidth>t)&&d>0;)d-=1,r.style.fontSize=`${d}px`;return u.remove(),r.remove(),{fontSize:d,lines:d>0?function({font:e,fontSize:t,textList:i,width:a}){if("undefined"==typeof document||!document.body||a<=0||t<=0)return[];let{body:o}=document,l=document.createElement("div");o.appendChild(l);let r={letterSpacing:e.fontOverrides?.letterSpacing!=null?`${e.fontOverrides.letterSpacing}px`:void 0,lineHeight:String(e.fontOverrides?.lineHeight||1.1),fontFamily:e.fontFamily,fontSize:`${t}px`,visibility:"hidden"};Object.assign(l.style,r);let s=document.createElement("div");s.style.display="inline",l.appendChild(s);let d=document.createTextNode("");s.appendChild(d);let c=[],u="",p=e=>{let t=e.trim();return d.textContent=t,{text:t,width:s.offsetWidth}},h=e=>{let t=!!e.match(/\s/),i=0===u.length;if(d.textContent=`${u}${e}`,s.offsetWidth>a)if(t)c.push(p(u)),u="";else if(i)for(let t of e)h(t);else c.push(p(u)),u="",h(e);else u+=e};for(let e of i??[])0===e.length&&c.push(p(u)),n(e).forEach(e=>h(e)),u.length&&(c.push(p(u)),u="");return s.remove(),l.remove(),c}({font:i,fontSize:d,textList:s,width:t}):[]}}function o(e){let t=window.getComputedStyle(e,null),i=parseFloat(t.getPropertyValue("height").replace("px","")),n=parseFloat(t.getPropertyValue("font-size").replace("px","")),a=parseFloat(t.getPropertyValue("line-height").replace("px",""));return Number.isNaN(a)&&(a=1.2*n),Math.ceil(i/a)}i.d(t,{KV:()=>a,Yd:()=>n,xW:()=>o})},47676:function(e,t,i){i.d(t,{Af:()=>c,Ei:()=>s,II:()=>x,Lh:()=>g,U:()=>h,Zy:()=>r,dD:()=>o,er:()=>m,hb:()=>_,in:()=>d,j7:()=>y,kX:()=>u,mx:()=>f,n5:()=>l,q8:()=>p,xH:()=>a});var n=i(123317);let a=1048576,o=3,l=20,r=3,s=10,d=50,c=10,u=1200,p=375,h=375/n.ap,m=4096,g="#FFFFFF",y={blockStyle:{x_coord:4.27,y_coord:46.82,width:91.46,height:26.35,corner_radius:0},style:{font_id:6,hex_color:"#FFFFFF",font_size:36,alignment:1},text:"",type:"story_pin_paragraph_block"},_=420,f=325,x=768},589357:function(e,t,i){i.d(t,{Ul:()=>o,VS:()=>n,hy:()=>l,iM:()=>a,j4:()=>r});let n=2,a=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1],o={backgroundImage:"linear-gradient(to top, rgba(0, 0, 0, .4), rgba(0, 0, 0, 0))",pointerEvents:"none",bottom:0},l=128,r=e=>e&&document.querySelector(`video[poster="${e}"]`)||null}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/92503-421b15ee56d286d9.mjs.map