(self.modernJsonp=self.modernJsonp||[]).push([["84270"],{576140:function(e,t,r){r.d(t,{q:()=>p});var a=r(667294),n=r(581722),o=r(825332),i=r(400267),l=r(821342),s=r(274320),u=r(378888),c=r(469817),d=r(932370),m=r(261228);let p=()=>{let{checkExperiment:e}=(0,s.r)(),t=e("ap_dweb_nux_in_sync_closeup_request",{dangerouslySkipActivation:!0}).group,r="control_baseline"===t||"enabled_closeup"===t,p=e("ap_dweb_nux_revamp_v3_iteration",{dangerouslySkipActivation:!0}).anyEnabled,_=e("activation_foundation_dweb_autofollow_v2",{dangerouslySkipActivation:!0}).anyEnabled,f=(0,o.TH)(),g=(0,l.Z)(),E=(0,n.I0)(),{selectedUseCases:y,selectedPins:h}=(0,d.u)(),b=(0,c.rQ)(y,h);return(0,a.useCallback)(()=>{let e=g.isAuth&&g.firstHomeFeedRequestAfterNux,t=(0,i.Z)({viewerIsPartner:g.isAuth&&g.isPartner,inNux:(e&&E((0,m.H5)(!1)),e),staticFeed:!!(f&&(f.pathname.includes("pwt_performance_testing")||void 0!==(0,u.mB)(f.search).pwt_performance_testing)),inNewsHub:f?.pathname.includes("news_hub")??!1});return{name:"UserHomefeedResource",options:(r||p||_)&&b.length>0?{...t,nux_signals_map:b}:t}},[E,g,f,r,p,_,b])}},449029:function(e,t,r){r.d(t,{_:()=>l,p:()=>s}),r(281098);var a=r(667294),n=r(729434),o=r(785893);let{Provider:i,get:l}=(0,n.Z)("VisualShopContext");function s({children:e}){let[t,r]=(0,a.useState)({}),[n,l]=(0,a.useState)({}),s=(0,a.useRef)(0),u=(0,a.useRef)("");return(0,o.jsx)(i,{value:{cachedOneBarModules:t,setCachedOneBarModules:r,cachedDescriptorModules:n,setCachedDescriptorModules:l,imageContainerScrollTop:s,imageContainerScrollTopForPinId:u},children:e})}},390843:function(e,t,r){r.d(t,{aX:()=>m,nK:()=>p,ou:()=>u}),r(281098);var a=r(667294),n=r(616550),o=r(825332),i=r(729434),l=r(785893);let{Provider:s,get:u}=(0,i.Z)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function d(e,t){let r={action:t.type,location:t.location,match:t.match};if(t.location===e.current?.location)return e;switch(t.type){case"POP":if(e.forward.length>0&&c(e.forward[0].location)===c(r.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.type},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,match:e.current.match},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.type},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:r,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,match:e.current.match}]:e.previous};case"REPLACE":return{...e,current:r};default:return e}}function m(){let{current:e,previous:t}=u();return(0,a.useMemo)(()=>e?t.concat(e):t,[e,t])}function p({children:e}){let t=(0,n.k6)(),r=(0,o.TH)(),i=(0,n.$B)(),u={forward:[],current:{action:t.action,location:r,match:i},previous:[]},[c,m]=(0,a.useReducer)(d,u),p=(0,a.useRef)(r);if(p.current!==r){let{action:e}=t;m({type:e,location:r,match:i}),p.current=r}return(0,l.jsx)(s,{value:c,children:e})}},399573:function(e,t,r){r.d(t,{Z:()=>a});function a(e){return function e(t,r){let a;if(null==t||"object"!=typeof t&&"function"!=typeof t)return t;let n=r.find(e=>e.value===t);if(n)return n.result;let o=Object.prototype.toString.call(t);switch(o){case"[object Array]":a=Array(t.length);break;case"[object Set]":a=new Set;break;case"[object Object]":case"[object Arguments]":a={};break;case"[object Map]":a=new Map;break;default:return t}let i=[...r,{value:t,result:a}];switch(o){case"[object Array]":t.forEach((t,r)=>{a[r]=e(t,i)});break;case"[object Set]":t.forEach(t=>{a.add(e(t,i))});break;case"[object Object]":case"[object Arguments]":Object.entries(t).forEach(([t,r])=>{a[t]=e(r,i)});break;case"[object Map]":t.forEach((t,r)=>{a.set(r,e(t,i))})}return a}(e,[])}},289032:function(e,t,r){r.d(t,{Z:()=>a});function a(e,t,r){let a,n,o,i=!!r?.leading,l=r?.trailing!==!1,s=r?.maxWait?Math.max(r.maxWait,t):void 0,u=null,c=0;function d(t){let r=a;return a=void 0,c=t,r&&(n=e(...r)),n}function m(e){let r=e-(o??0),a=e-c;return void 0===o||r>=t||r<0||void 0!==s&&a>=s}function p(){let e=Date.now();m(e)?(u=null,l&&a)?d(e):a=void 0:u=setTimeout(p,function(e){let r=e-(o??0),a=e-c,n=t-r;return void 0!==s?Math.min(n,s-a):n}(e))}function _(){null!==u&&clearTimeout(u),u=setTimeout(p,t)}function f(...e){let r=Date.now(),l=m(r);if(a=e,o=r,l){if(null===u)return c=r,u=setTimeout(p,t),i?d(r):n;else if(void 0!==s)return _(),d(r)}return null===u&&_(),n}return f.flush=function(){if(null!==u&&a){let e=Date.now();return clearTimeout(u),u=null,d(e)}return n},f.cancel=function(){null!==u&&clearTimeout(u),c=0,a=void 0,o=void 0,u=null},f}},707079:function(e,t,r){r.d(t,{F_:()=>i,MA:()=>l,ZP:()=>n,y8:()=>o});var a=r(729434);class n{constructor(){var e,t,r;t={},(e="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e="pending","string"))?r:r+"")in this?Object.defineProperty(this,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):this[e]=t}add(e,t,r){r&&(this.pending[e]={...this.pending[e]??{},[t]:r},r.finally?.(()=>this.remove(e,t)))}remove(e,t){this.pending[e]?.[t]&&(delete this.pending[e][t],0===Object.keys(this.pending[e]).length&&delete this.pending[e])}get(e,t){return this.pending[e]?.[t]??null}}let o=new n,{Provider:i,getMaybe:l}=(0,a.Z)("PendingFetches")},791948:function(e,t,r){r.d(t,{UZ:()=>p,Z8:()=>_,my:()=>f,vL:()=>E,w1:()=>g}),r(281098);var a=r(667294),n=r(581722),o=r(575108),i=r(729434),l=r(72918),s=r(785893);function u(e,t,r){let a=[...t[e][r.payload.name]??[],r.payload.handler],n={...t};return n[e]={...t[e],[r.payload.name]:a},n}function c(e,t,r){if(!t[e][r.payload.name])return t;let a=t[e][r.payload.name].filter(e=>e!==r.payload.handler),n={...t};return n[e]={...t[e],[r.payload.name]:a},n}let{Provider:d,get:m}=(0,i.Z)("ResourceContext");function p({children:e,resourceCreator:t}){let[{listeners:r,moreListeners:n},i]=(0,a.useReducer)((e,t)=>{switch(t.type){case"addListener":return u("listeners",e,t);case"addMoreListener":return u("moreListeners",e,t);case"removeListener":return c("listeners",e,t);case"removeMoreListener":return c("moreListeners",e,t);default:return e}},{listeners:{},moreListeners:{}});o.Z.fetchCompleteCallback=({resource:e,options:t,response:a,normalizedResponse:n,refresh:o,resourceSchema:i})=>{r[e]&&r[e].forEach(r=>r({isRefresh:o,normalizedResponse:n,options:t,schema:i,resource:e,response:a}))},o.Z.fetchMoreCompleteCallback=({resource:e,options:t,response:r,normalizedResponse:a,refresh:o,resourceSchema:i})=>{n[e]&&n[e].forEach(n=>n({isRefresh:o,normalizedResponse:a,options:t,schema:i,resource:e,response:r}))};let l=(0,a.useMemo)(()=>({listenerDispatch:i,resourceCreator:t}),[t]);return(0,s.jsx)(d,{value:l,children:e})}function _(e,t){let{listenerDispatch:r}=m();(0,a.useEffect)(()=>(r({type:"addListener",payload:{name:e,handler:t}}),()=>{r({type:"removeListener",payload:{name:e,handler:t}})}),[r,e,t])}function f(e,t){let{listenerDispatch:r}=m();(0,a.useEffect)(()=>(r({type:"addMoreListener",payload:{name:e,handler:t}}),()=>{r({type:"removeMoreListener",payload:{name:e,handler:t}})}))}function g(){let e=(0,n.I0)();return(0,a.useCallback)((t,r)=>e((0,l.jB)(t,r)),[e])}function E(){return m().resourceCreator}},536652:function(e,t,r){r.d(t,{U:()=>d,b:()=>m});var a=r(575108),n=r(399573),o=r(440568),i=r(849233),l=r(72918),s=r(82347),u=r(954300);function c({addSuspenseResourceSSRData:e,fetchOptions:t,resource:r,resourceCreator:d,retry:m}){return async(_,f)=>{let{bookmark:g,headers:E,options:y,refresh:h,schema:b}=t,T=(0,o.Z)(y);if(f().resources?.[r]?.[T]?.fetching&&!m)return Promise.resolve();let v=m?m.bookmark:g,C=(0,n.Z)(y),A=v?{...C,bookmarks:[v]}:C;_((0,l.LQ)(r,y,!0));try{let n,o,f=d??a.Z.create,T=await f(r,A).callGet(void 0,E);e&&p(T)&&e(r,A,T),p(T)||(n=T.bookmarks?.[0]);let{data:v}=T.resource_response,{normalizedResponse:C,resourceSchema:R}=(0,u.f)({data:v,opts:{bookmark:g,options:y,schema:b},resource:r});if(p(T)){n=T.resource_response.bookmark??"";let e=(0,s.Z)(T);C=e.normalizedResponse,R=e.schema,o=e.response}else o=T;if(Array.isArray(v)&&0===v.length&&n&&n!==i.qx){let e=m?m.count:0;if(!(e>=i.s9))return _(c({resource:r,fetchOptions:t,retry:{count:e+1,bookmark:n},resourceCreator:d}))}o&&(g?(_((0,l.Dm)(r,y,o,C,R)),a.Z.fetchMoreCompleteCallback&&a.Z.fetchMoreCompleteCallback({resource:r,options:y,response:o,normalizedResponse:C,refresh:h,resourceSchema:R})):(_((0,l.Sr)(r,y,o,C,h,R)),a.Z.fetchCompleteCallback&&a.Z.fetchCompleteCallback({resource:r,options:y,response:o,normalizedResponse:C,refresh:h,resourceSchema:R})))}catch(t){if(e){let a=t.http_status??500;e(r,y,{resource:{name:r,options:y},resource_response:{data:null,error:t,http_status:a,status:"failure"}})}_((0,l.Tl)(r,y,t))}}}let d=(e,{bookmark:t,headers:r,options:a,schema:n},o,i)=>c({resource:e,fetchOptions:{bookmark:t,headers:r,options:a,refresh:!1,schema:n},resourceCreator:o,addSuspenseResourceSSRData:i}),m=(e,{headers:t,options:r,schema:a},n)=>c({resource:e,fetchOptions:{headers:t,options:r,refresh:!0,schema:a},resourceCreator:n});function p(e){return"resource"in e}},72918:function(e,t,r){r.d(t,{Dm:()=>u,LQ:()=>i,Sr:()=>s,Tl:()=>l,XM:()=>o,jB:()=>c});var a=r(35831),n=r(23534);function o(e,t,r,n){return{type:a.AF,payload:{resource:e,options:t,response:r,normalizedResponse:n}}}function i(e,t,r){return{type:a.KK,payload:{resource:e,options:t,isFetching:r}}}let l=(e,t,r)=>({type:a.cR,payload:{resource:e,options:t,error:r}});function s(e,t,r,o,i,l){return{type:a.zP,payload:{isRefresh:i,normalizedResponse:o,options:t,resource:e,response:r,schema:l},meta:{[n.s]:!0}}}function u(e,t,r,n,o){return{type:a.aW,payload:{resource:e,options:t,response:r,normalizedResponse:n,schema:o}}}function c(e,t){return{type:a.se,payload:{resource:e,optionsOrOptionsKey:t}}}},82347:function(e,t,r){r.d(t,{Z:()=>i});var a=r(782677),n=r(24315),o=r(954300);function i(e){let{resource:t,resource_response:r}=e,{name:i,options:l}=t,s=(0,n.Z)(r),{data:u,error:c}=r,d=(0,o.J)(i,{options:l});return{error:c,isRefresh:!1,normalizedResponse:d&&u?(0,a.Fv)(u,d):null,options:l,resource:i,response:{auxData:s,bookmarks:r.bookmark?[r.bookmark]:void 0,resource_response:{data:u,error:c}},schema:d}}},943257:function(e,t,r){r.d(t,{Z:()=>m});var a=r(667294),n=r(581722),o=r(825332),i=r(440568),l=r(15667),s=r(536652),u=r(849233),c=r(707079),d=r(791948);function m(e,t,r){let{enabledRouteRefresh:m,headers:p,name:_,noCache:f,options:g,schema:E}=e,y=(0,c.MA)(),h=(0,d.vL)(),b=(0,n.I0)(),T=(0,i.Z)(g),v=(0,a.useRef)(void 0),C=(0,o.ur)(),A=(0,a.useRef)(void 0),R=e=>e[_]?.[T],M=(0,n.v9)(({resources:e})=>R(e)?.data),G=(0,n.v9)(({resources:e})=>R(e)?.error),w=!!G||void 0!==M,D=(0,n.v9)(({resources:e})=>!!R(e)?.fetching),k=(0,n.v9)(({resources:e})=>R(e)?.nextBookmark),O=w&&!D&&k===u.qx,N=!!(w&&m&&"POP"!==C&&!t),[Z,U]=(0,a.useState)(N),S=Z;(0,n.wU)(M,A.current)||(Z&&(A.current||!N)&&(S=!1,U(!1)),A.current=M);let L=(0,a.useCallback)(e=>{let t=b((0,s.U)(_,{options:g,schema:E,bookmark:e,headers:p},h,void 0));e||y?.add(_,T,t)},[b,_,T,E,p]),P=(0,a.useCallback)(()=>{let e=b((0,s.b)(_,{options:g,schema:E,headers:p},h));y?.add(_,T,e)},[b,_,T,E,p]),j=(0,a.useCallback)(()=>{t||(P(),U(!0))},[t,P]),I=(0,a.useCallback)(()=>{!k||O||D||t||L(k)},[t,L,O,D,k]),{isBot:F}=(0,l.B)(),H=(0,a.useCallback)(()=>{if(!(D||y?.get(_,T))&&!t&&v.current!==T){let e=void 0===v.current;v.current=T,!w||r&&e&&G&&(({httpStatus:e})=>!e||e>=500)(G)?L():(!F&&f||N)&&P()}},[r,L,P,t,G,F,D,w,N,_,f,T,y]),x=(0,a.useMemo)(()=>({name:_,optionsKey:T}),[_,T]);return(0,a.useMemo)(()=>({fetchResource:H,ref:x,refresh:j,fetchMore:I,isFetching:D,isLoaded:w,isRefreshing:S}),[I,H,D,w,x,S,j])}(0,r(512395).kr)()},886981:function(e,t,r){r.d(t,{Z:()=>s});var a=r(667294),n=r(581722),o=r(440568),i=r(849233),l=r(943257);function s(e){let{enabledRouteRefresh:t,headers:r,name:s,noCache:u,options:c,schema:d}=e??{name:i.fY,options:null},m=(0,o.Z)(c),p=e=>e[s]?.[m],_=(0,n.v9)(({resources:e})=>p(e)?.nextBookmark),f=(0,n.v9)(({resources:e})=>p(e)?.data),g=(0,n.v9)(({resources:e})=>p(e)?.auxData),E=(0,n.v9)(({resources:e})=>p(e)?.error),{fetchResource:y,fetchMore:h,isFetching:b,isLoaded:T,isRefreshing:v,refresh:C}=(0,l.Z)({enabledRouteRefresh:t,headers:r,name:s,noCache:u,options:c,schema:d},!e,!0),A=T&&!b&&_===i.qx;return(0,a.useEffect)(()=>{y()}),(0,a.useMemo)(()=>({auxData:g,data:f,error:E,fetchMore:h,isAtEnd:A,isFetching:b,isLoaded:T,isRefreshing:v,nextBookmark:_,refresh:C}),[g,f,E,h,A,b,T,v,_,C])}},914071:function(e,t,r){r.d(t,{Z:()=>n});var a=r(667294);function n(e,t){let r=(0,a.useRef)([]),[n,o]=(0,a.useState)(),[i,l]=(0,a.useReducer)(n??(()=>t),t),s=(0,a.useCallback)(t=>{n?l(t):(r.current.length||e().then(e=>{o(()=>e.default)}),r.current=[...r.current,t])},[e,n]);return(0,a.useEffect)(()=>{n&&(r.current.forEach(l),r.current=[])},[n]),[i,s]}},105433:function(e,t,r){r.d(t,{pb:()=>h,nf:()=>b,lV:()=>T}),r(281098);var a=r(667294),n=r(581722),o=r(441143),i=r.n(o),l=r(575108),s=r(729434),u=r(686319),c=r(791948),d=r(503246),m=r(991384);let p={feature_map:Object.freeze({})},_=(e,t)=>{let r={...(0,m.Z)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return(0,d.ZP)(e,r)?e:r},f=(e,t)=>{if(e=e||p,"FETCH_COMPLETE"===t.type){let{payload:{resource:r}}=t,{data:a}=t.payload.response.resource_response;if("AggregatedCommentFeedResource"===r||"AggregatedCommentReplyFeedResource"===r||"DidItCommentsResource"===r){let t=(a||[]).reduce((t,r)=>(t[r.id]=_(e[r.id],r),t),{});return{...e,...t}}if("UnifiedCommentsResource"===r&&a&&a.length>0){let t=a.filter(e=>"aggregatedcomment"===e.type).reduce((t,r)=>(t[r.id]=_(e[r.id],r),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===r&&a&&a.length>0){let t=a.map(e=>e.aggregated_comment).reduce((t,r)=>(r&&(t[r.id]=_(e[r.id],r)),t),{}),r=a.map(e=>e.creator_reply).reduce((t,r)=>(r&&r.id&&(t[r.id]=_(e[r.id],r)),t),{});return{...e,...t,...r}}if("AggregatedCommentFeaturesResource"===r&&a&&Object.keys(a).length>0)return{...e,feature_map:a}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:r}}=t;return r.id?{...e,[r.id]:r}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:r}}=t,a={...e};return delete a[r],a}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:r}}=t;return Object.fromEntries(Object.entries(e).filter(e=>e[1].user?.id!==r))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:r}}=t;return{...e,[r.id]:_(e?.[r.id],r)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:r}}=t,a=e?.[r.id],n=a?.reaction_counts[1]||0,o={1:r.reaction_by_me?n+1:n-1},i={...a,reaction_by_me:r.reaction_by_me,reaction_counts:o};return{...e,[r.id]:i}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:r}}=t,a=e?.[r.id],n=a?.helpful_count||0,o=r.marked_helpful_by_me?n+1:n-1,i={...a,marked_helpful_by_me:r.marked_helpful_by_me,helpful_count:o};return{...e,[r.id]:i}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:r}}=t,a={...e?.[r.aggregated_comment_id],highlighted_by_pin_owner:r.is_highlighted};return{...e,[r.aggregated_comment_id]:a}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:r}}}=t;return{...e,feature_map:{...e?.feature_map,...r}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:r,id:a}}=t,n=e?.[a];if(!n)return e;let o={...n,comment_count:n.comment_count+r};return{...e,[a]:o}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:r,tagged_users:a}}=t,n={...e?.[r],tagged_users:a};return{...e,[r]:n}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:r,translatedText:a}}=t,n={...e?.[r],translatedText:a};return{...e,[r]:n}}return e};var g=r(785893);let{Provider:E,get:y}=(0,s.Z)("AggregatedComments");function h({children:e}){let t=(0,n.v9)(({resources:e})=>e?.UnifiedCommentsResource),r=p;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),a=t?.reduce((e,t)=>(e[t.id]=_(r[t.id],t),e),{});r={...r,...a}});let[o,i]=(0,a.useReducer)(f,r),l=e=>{i({type:"FETCH_COMPLETE",payload:e})};(0,c.Z8)("AggregatedCommentFeaturesResource",l),(0,c.my)("AggregatedCommentFeaturesResource",l),(0,c.Z8)("AggregatedCommentFeedResource",l),(0,c.my)("AggregatedCommentFeedResource",l),(0,c.Z8)("AggregatedCommentReplyFeedResource",l),(0,c.my)("AggregatedCommentReplyFeedResource",l),(0,c.Z8)("DidItCommentsResource",l),(0,c.my)("DidItCommentsResource",l),(0,c.Z8)("UnifiedCommentsPreviewResource",l),(0,c.my)("UnifiedCommentsPreviewResource",l),(0,c.Z8)("UnifiedCommentsResource",l),(0,c.my)("UnifiedCommentsResource",l);let s=(0,a.useMemo)(()=>({aggregatedComments:o,dispatch:i}),[o,i]);return(0,g.jsx)(E,{value:s,children:e})}function b(){let{dispatch:e}=y();return(0,a.useMemo)(()=>({aggregatedCommentCreated(t,r){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:r}})},aggregatedCommentDeleted:(t,r)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:r}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:r,detailedReasons:a})=>{let n=e?`/v3/aggregated_comments/${t}/flag/`:`/v3/did_it/${t}/flag/`;return(0,u.Z)({url:n,method:"PUT",data:{commentId:t,reason:r,detailedReasons:a}})},deleteCommentMention:async t=>{let{resource_response:r}=await (0,u.Z)({url:`/v3/aggregated_comments/${t}/mentions/`,method:"DELETE",data:{fields:["aggregatedcomment.id","aggregatedcomment.tagged_users"]}}),a=r.data??{};e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:a.id,tagged_users:a.tagged_users}})},translateAggregatedComment:async t=>{try{let{resource_response:r}=await (0,u.Z)({url:`/v3/aggregated_comments/${t}/translate/`,method:"GET"}),a=r.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:a}})}catch(r){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:r,orbacSubjectId:a})=>{(0,u.Z)({url:`/v3/helpful/1/${t}/`,method:r?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!r}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:r,isHighlighted:a})=>{i()(t,"Could not find comment"),i()(r,"Could not find Pin"),await (0,u.Z)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:r,highlight:!a}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:r,is_highlighted:!a}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:r,orbacSubjectId:a})=>{(0,u.Z)({url:`/v3/aggregated_comments/${t}/react/`,method:r?"DELETE":"POST",data:{reaction_type:1,...a?{orbac_subject_id:a}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!r}}})},updateAggregatedComment:async({commentId:t,force:r,orbacSubjectId:a,tags:n,text:o})=>{let{resource_response:i}=await l.Z.create("AggregatedCommentResource",{commentId:t,force:r,tags:n,text:o,...a?{orbacSubjectId:a}:{}}).callUpdate({showError:!1}),{tagged_users:s}=i.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:s.map(e=>({...e})),tags:JSON.parse(n),text:o}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:r,passcode:a,userConfirmPasscode:n})=>{let o={userId:t,featureMap:r,passcode:a,user_confirm_skip_passcode:n};void 0===n&&(o.user_confirm_skip_passcode=!1);let{resource_response:i}=await l.Z.create("AggregatedCommentFeaturesResource",o).callUpdate({showError:!1});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:i.data??Object.freeze({})}}})},updateCommentCount:(t,r)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:r,id:t}})}}),[e])}function T(){let{aggregatedComments:e}=y();return e}},85442:function(e,t,r){r.d(t,{C:()=>n});var a=r(274320);function n(){let{checkExperiment:e}=(0,a.r)();switch(e("entrypoints_collage_wasm").group){case"prefetch_all":default:return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"}}}},393107:function(e,t,r){r.d(t,{Z:()=>i});var a=r(281098),n=r(821342),o=r(274320);let i=()=>{(0,a.Z)("useIsCollageOnDwebEnabled","/app/www/CollageCreation/useIsCollageOnDwebEnabled.tsx");let{checkExperiment:e}=(0,o.r)(),t=(0,n.Z)(),r=t.isAuth&&!t.isPartner;return (t=!1)=>{if(!r)return{anyEnabled:!1,followupFeatureEnabled:!1};let a=e("web_collage_creation",{dangerouslySkipActivation:t}),{anyEnabled:n}=a;return{anyEnabled:n,followupFeatureEnabled:a.group.startsWith("employee")||"enabled_followup_feature"===a.group}}}},598849:function(e,t,r){r.d(t,{C:()=>a,Z:()=>o});let{Provider:a,get:n}=(0,r(729434).Z)("Header"),o=n},469817:function(e,t,r){r.d(t,{Es:()=>u,HW:()=>s,er:()=>d,rQ:()=>c});var a=r(111330),n=r(753143),o=r(603316);let i=e=>e>=Date.now()-72e5,l=(e,t)=>{let r=[];if(e)for(let a of e)(!t||a.is_shared)&&i(a.ts)&&r.push(a);return r},s=()=>{let e=(0,n.M0)().getItem(a.uc)??[],t=l(e,!1),r=l(e,!0),o=t.map(e=>e.first_pin_image_signature),s=r.map(e=>e.first_pin_image_signature),u=(e=>{let t={};if(e)for(let r of e)r.is_shared&&i(r.ts)&&r.pin_id&&(t[r.pin_id]={inviteCode:r.pin_invite_code});return t})(e);return{extraPlpImages:o,plpImageRenderData:t,extraBlpImages:l((0,n.M0)().getItem(a.hI)??[],!0).map(e=>e.first_pin_image_signature),extraSharedImages:s,sharedPinData:u}},u=(e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r].id!==t[r].id)return!1;return!0},c=(e,t)=>e.map(e=>({1:e,2:(t[e]||[]).map(e=>({1:e,2:"pin"}))})),d=(e,t,r,a)=>{let n={};return e.forEach(e=>{let i=e.id,l=e.pins.length??0;n[i]=l,(0,o.QX)("webapp.log.nux.pin.picker.step.pin.number.of.pins",l,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:i,gender:r,age:a,use_case_display_name:e.display_name}}),(0,o.S0)("gauge.webapp.log.nux.pin.picker.step.pin.number.of.pins",l,{sampleRate:1,addHostname:!0,tags:{appType:t,useCaseId:i,gender:r,age:a,use_case_display_name:e.display_name}})}),n}},954300:function(e,t,r){r.d(t,{J:()=>o,f:()=>i});var a=r(782677),n=r(388023);let o=(e,{bookmark:t,options:r,schema:a})=>{let o=a||n.Z[e];return"function"==typeof o?o({resource:e,options:r,bookmark:t}):o};function i({data:e,opts:{bookmark:t,options:r,schema:n},resource:i}){let l=o(i,{bookmark:t,options:r,schema:n});return{normalizedResponse:l&&e?(0,a.Fv)(e,l):null,resourceSchema:l}}},979922:function(e,t,r){r.d(t,{BT:()=>L,Du:()=>j,Fh:()=>k,HY:()=>P,HZ:()=>N,IY:()=>S,Jw:()=>y,Kp:()=>W,L7:()=>a,LT:()=>d,Lj:()=>H,Nw:()=>R,Q_:()=>A,Qc:()=>n,R5:()=>G,RA:()=>M,Tt:()=>D,UF:()=>u,UV:()=>i,VB:()=>b,W1:()=>o,Ws:()=>m,X5:()=>w,Yt:()=>U,ZW:()=>s,cK:()=>T,cy:()=>E,fA:()=>F,fn:()=>Z,gm:()=>h,h7:()=>C,k:()=>f,mE:()=>x,o4:()=>_,oL:()=>I,qf:()=>p,tr:()=>c,uD:()=>v,uO:()=>g,vF:()=>l,wJ:()=>O});let a=1,n=2,o="female",i="male",l="unspecified",s="en-US",u="US",c=3,d="Welcome",m="Gender",p="CountryLocale",_="InterestPicker",f="UseCase",g="PinPicker",E="LoadingStep",y="AppInstall",h="NUX_PIN_PICKER_STEP_STATUS",b="NUX_USE_CASE_STEP_STATUS",T={NUX_GENDER_STEP_NAME:m,NUX_COUNTRY_LOCALE_STEP_NAME:p,NUX_INTEREST_PICKER_STEP_NAME:_,NUX_USE_CASE_STEP_NAME:f,NUX_PIN_PICKER_STEP_NAME:g,NUX_LOADING_STEP_NAME:E,NUX_APP_INSTALL_STEP_NAME:y},v=2,C=3,A=6,R=112,M=160,G=60,w=1e3,D=2500,k=1900,O=2e3,N=3,Z=5,U=1,S=2,L=3,P=3,j=5e3,I=250,F=1e10,H=507641,x=300,W=200},932370:function(e,t,r){r.d(t,{W:()=>s,u:()=>l}),r(281098);var a=r(667294),n=r(729434),o=r(785893);let{Provider:i,get:l}=(0,n.Z)("Nux");function s({children:e}){let[t,r]=(0,a.useState)([]),[n,l]=(0,a.useState)({}),s=(0,a.useMemo)(()=>({selectedUseCases:t,setSelectedUseCases:r,selectedPins:n,setSelectedPins:l}),[t,r,n,l]);return(0,o.jsx)(i,{value:s,children:e})}},261228:function(e,t,r){r.d(t,{H5:()=>s,Nq:()=>l,Q_:()=>u,bJ:()=>c});var a=r(575108),n=r(657043),o=r(600861),i=r(979922);function l(e){let{updateUserData:t}=e,r={},l=null;if(t.gender&&[i.W1,i.UV].includes(t.gender)?r.gender=t.gender:t.custom_gender&&(r.custom_gender=t.custom_gender,r.customGender=t.custom_gender,r.gender=i.vF),t.age?r.age=t.age:t.birthdate&&(r.birthdate=t.birthdate),t.locale&&(r.locale=t.locale),t.country&&(r.country=t.country),t.business_vertical&&(r.businessVertical=t.business_vertical),t.business_vertical_other&&(r.businessVerticalOther=t.business_vertical_other),t.number_employees&&(r.numberEmployees=t.number_employees),t.first_name&&(r.firstName=t.first_name),t.last_name&&(r.lastName=t.last_name),t.full_name&&(r.fullName=t.full_name),t.parent_email&&(r.parentEmail=t.parent_email),t.website_url&&(r.websiteUrl=t.website_url),t.listed_website_url&&(r.listedWebsiteUrl=t.listed_website_url),void 0!==t.allow_analytic_cookies&&(r.allow_analytic_cookies=t.allow_analytic_cookies),void 0!==t.allow_analytic_cookies&&(r.allow_marketing_cookies=t.allow_marketing_cookies),void 0!==t.allow_analytic_cookies&&(r.allow_personalization_cookies=t.allow_personalization_cookies),t.advertising_intent||t.business_name||t.account_type||t.business_goals||t.selected_ecommerce_platforms||t.enable_profile_message||t.enable_profile_address){let{account_type:e,advertising_intent:r,business_name:a,business_goals:n,enable_profile_message:o,enable_profile_address:i,selected_ecommerce_platforms:s}=t;l={...r?{advertising_intent:r}:{},...e?{account_type:e}:{},...a?{business_name:a}:{},...n?{business_goals:n}:{},...o?{enable_profile_message:o}:{},...i?{enable_profile_address:i}:{},...s?{selected_ecommerce_platforms:s}:{}}}l&&(r.partner=l,l.business_name&&(r.firstName=l.business_name));let s=a.Z.create("UserSettingsResource",{...t,surface_tag:o.i.NUX}).callUpdate();return async function(e){try{let t=await s;return e({type:"UPDATE_USER_SET",payload:r}),t}catch(e){return Promise.reject(Error((0,n.Z)(e,"message")))}}}function s(e){return{type:"UPDATE_USER_FIRST_HOME_FEED_REQUEST_AFTER_NUX",payload:e}}function u(e,t){return()=>{a.Z.create("UserStateResource",{state:e,value:t}).callCreate()}}function c(e,t=""){return()=>a.Z.create("UpdateFollowedInterestsResource",{referrer:t,updated_interest_follows:e}).callUpdate()}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/84270-4f7c29699eee7a3f.mjs.map